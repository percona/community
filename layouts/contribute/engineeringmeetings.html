{{ define "css" -}}
{{- .Page.Scratch.Add "css" (partial "scss" (dict "file" "scss/projects.scss") | safeCSS) -}}
{{- if in .Content "<pre class=\"chroma\">" -}}
        {{- .Page.Scratch.Add "css" (partial "scss" (dict "file" "scss/code.scss") | safeCSS) -}}
    {{- end -}}
{{- end -}}

{{ define "mainwrapper" }}
    {{- .Content -}}

    <div class="contentblock branded">
        <div class="grid grid--2">
            {{- $pages := .Pages -}}
            {{- $paginator := .Paginate $pages }}
            {{- range $paginator.Pages -}} 
                <div class="grid__item">
                    {{- partial "event-preview" . -}} 
                </div>
            {{- end -}}
        </div>
        {{- if gt $paginator.TotalPages 1 -}}
        <div class="paginator">
            {{- if $paginator.HasPrev -}}
                <a href="{{ $paginator.Prev.URL }}" rel="prev">&laquo;</a>
            {{- end -}}
            {{- range $paginator.Pagers -}}
                <a href="{{ .URL }}"{{ if eq . $paginator}}class="active"{{end}}>{{ .PageNumber }}</a>
            {{- end -}}
            {{- if $paginator.HasNext -}}
                <a href="{{ $paginator.Next.URL }}" rel="next">&raquo;</a>
            {{- end -}}
        </div>
        {{- end -}}

        {{ partial "sharing.html" . }}
    </div>
{{ end }}