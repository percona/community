<!doctype html><html lang=en prefix="og: https://ogp.me/ns#"><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=1"><title>MySQL: Tracing a single query with PERFORMANCE_SCHEMA | Percona Community</title><meta name=description content="My task is to collect performance data about a single query, using `PERFORMANCE_SCHEMA` (P_S for short) in MySQL, to ship it elsewhere for integration with â€¦"><link rel="shortcut icon" href=/superhero_huf5968b80ec9b386b36835fc6e8ce3113_170434_64x64_resize_lanczos_2.png type=image/png><link rel=canonical href=https://percona.community/blog/2022/10/18/mysql-tracing-a-single-query-with-performance_schema/><meta name=robots content="index,follow"><meta property="og:title" content="MySQL: Tracing a single query with PERFORMANCE_SCHEMA"><meta property="og:description" content="My task is to collect performance data about a single query, using `PERFORMANCE_SCHEMA` (P_S for short) in MySQL, to ship it elsewhere for integration with other data."><meta property="og:type" content="article"><meta property="og:url" content="https://percona.community/blog/2022/10/18/mysql-tracing-a-single-query-with-performance_schema/"><meta name=image property="og:image" content="https://percona.community/blog/2022/10/mysql-tracing-a-single-query_hud677263ffc232a4e2b0b556c687949fa_238103_1200x0_resize_q90_lanczos.jpg"><meta property="article:published_time" content="2022-10-18T00:00:00+00:00"><meta property="article:modified_time" content="2022-10-18T00:00:00+00:00"><meta property="article:section" content="blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://percona.community/blog/2022/10/mysql-tracing-a-single-query.jpg"><meta name=twitter:title content="MySQL: Tracing a single query with PERFORMANCE_SCHEMA | Percona Community"><meta name=twitter:description content="My task is to collect performance data about a single query, using `PERFORMANCE_SCHEMA` (P_S for short) in MySQL, to ship it elsewhere for integration with other data."><meta name=twitter:site content="@Percona"><meta name=twitter:creator content="@isotopp"><meta name=copyright content="Â© Percona Community. MySQL, InnoDB, MariaDB and MongoDB are trademarks of their respective owners.
"><meta name=author content="Kristian KÃ¶hntopp"><style>@charset "UTF-8";html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after{content:none}q:before,q:after{content:none}table{border-collapse:collapse;border-spacing:0}html,body{font-family:Arial,sans-serif;scroll-behavior:smooth;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;line-height:1.5rem;font-feature-settings:"liga" 1;font-weight:400;font-size:18px}@media(min-width:900px){html,body{font-size:20px}}@media(min-width:1100px){html,body{font-size:22px}}@media(min-width:1800px){html,body{font-size:24px}}@media print{html,body{font-size:18px}}hr{border:0;height:2px;background-color:#fe7f2d;margin-top:1.5rem;margin-bottom:1.5rem}.text{position:relative}.text .meta{font-variant:small-caps}.text .meta .byline{display:none}.text .meta .line{display:inline-block}.text .meta .calendar{display:none}.text h1,.text h2,.text h3,.text h4,.text h5,.text h6{font-family:Georgia,palatino linotype,book antiqua,Palatino,times new roman,serif;font-weight:400;page-break-after:avoid}.text h1 a,.text h1 a:visited,.text h2 a,.text h2 a:visited,.text h3 a,.text h3 a:visited,.text h4 a,.text h4 a:visited,.text h5 a,.text h5 a:visited,.text h6 a,.text h6 a:visited{color:#333;text-decoration:none}.text p,.text ul,.text ol,.text figure,.text dl,.text hr{margin-top:.75rem;font-size:1rem;line-height:1.75rem}.text q{font-style:italic}.text ul ul{margin-top:0}.text p>code,.text ul>code,.text ol>code,.text dt>code,.text dd>code,.text li>code{color:#004966}.text audio{display:block;width:100%;height:1.5rem;outline:none}.text audio span{line-height:1.5rem}.text dl{overflow:auto;position:relative}.text dt{font-weight:700}.text dd{padding-left:2rem}.text dd+dt{margin-top:1.5rem}.text ul{list-style-type:disc;padding-left:1.5rem}.text ol{list-style-type:decimal;padding-left:1.5rem}.text p{overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.text h1{font-size:2rem;font-weight:400;line-height:2.5rem;margin-top:1.5rem;margin-bottom:0}@media screen and (min-width:760px){.text h1{font-size:2rem;line-height:2.5rem;margin-top:1.5rem}}@media screen and (min-width:900px){.text h1{font-size:2.5rem;line-height:3rem;margin-top:3rem}}@media screen and (min-width:1200px){.text h1{font-size:3rem;line-height:4rem;margin-top:3rem}}.text h2{font-size:1.5rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h3{font-size:1.25rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h4{font-size:1rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem;font-size:1.1rem}.text h5{font-size:.8rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h6{font-size:.6rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text strong{font-weight:700}.text em{font-style:italic}.text code{font-family:lucida console,Monaco,monospace;speak:literal-punctuation}.text abbr,.text acronym{speak:spell-out}.text del{text-decoration:line-through}.text ins{text-decoration:none;font-style:italic}.text figure{position:relative;text-align:center}.text figure img{background:#fff;border-radius:.2rem;max-width:100%}.text figure table{min-width:75%;border-radius:.2rem;margin-left:auto;margin-right:auto;border:#004966;border-collapse:separate;border-spacing:0;background:#fff;margin-bottom:-.1em}.text figure table th,.text figure table td{padding-left:.75rem;padding-right:.75rem;line-height:1.3rem;border-left:.1rem solid #004966;border-top:.1rem solid #004966}.text figure table thead{background-color:#fff}.text figure table tr td:last-child,.text figure table tr th:last-child{border-right:.1rem solid #004966}.text figure table tbody:last-child tr:last-child td{border-bottom:.1rem solid #004966}.text figure table thead:first-child tr:first-child th:first-child,.text figure table thead:first-child tr:first-child td:first-child{border-top-left-radius:.2rem}.text figure table thead:first-child tr:first-child,.text figure table thead:first-child tr:first-child th:last-child,.text figure table thead:first-child tr:first-child td:last-child{border-top-right-radius:.2rem}.text figure table tbody:last-child tr:last-child,.text figure table tbody:last-child tr:last-child td:first-child{border-bottom-left-radius:.2rem}.text figure table tbody:last-child tr:last-child,.text figure table tbody:last-child tr:last-child td:last-child{border-bottom-right-radius:.2rem}.text figure ul{text-align:left}.text figure ul.tree{padding-top:1.5em;padding-bottom:1.5em;border-radius:.2rem;background:#fff}.text figure ul.tree li{list-style-type:none}.text figure ul.tree .tree__item--folder::before{content:"ðŸ“";margin-right:.2em}.text figure ul.tree .tree__item--file::before{content:"ðŸ“";margin-right:.2em}.text figure figcaption{font-style:italic}.text pre{margin-top:1.5rem;font-size:inherit;line-height:1.5rem;padding:1.5rem 1.5rem .75rem;white-space:pre;overflow-x:scroll;overflow-y:hidden;scrollbar-color:#cccccc transparent;scrollbar-width:.75rem}.text pre::-webkit-scrollbar{margin-top:-.75rem;height:.75rem}.text pre::-webkit-scrollbar-track{background:0 0}.text pre::-webkit-scrollbar-thumb{height:.1rem;border-radius:.2rem;background:#ccc}.text hr{border:0;height:.2rem;background:#004966;margin-top:1.3rem}.text .admonition{position:relative}.text .admonition>*{padding-left:2rem}.text .admonition>:first-child::before{display:block;text-align:left;position:absolute;top:0;left:0;width:.75rem;font-size:1rem;line-height:1.5rem;height:1.5rem}.text .admonition--tip>:first-child::before{content:"â˜›";color:#fefefe;font-size:1.5rem;line-height:1.5rem;height:1.5rem}.text .admonition--warning>:first-child::before{content:"âš ï¸";color:#fefefe}.text .admonition--info>:first-child::before{content:"â“˜";color:#004966;font-weight:700}@media print{.text h1{margin-left:auto;margin-right:auto;margin-top:9rem;width:80%;font-variant:small-caps;text-align:center}.text--simple h1{margin-top:0}.text .meta{page-break-after:always;text-align:center;font-size:1.2rem;margin-top:1.5rem}.text .meta a{text-decoration:none}.text .meta time{display:none}.text .body p:first-of-type{margin-top:0}.text pre{padding:0;font-size:inherit;line-height:1.5rem;overflow:hidden;white-space:pre-wrap;word-break:break-all}}.text .podcasts{margin-top:1.5rem;text-align:center}.text a.podcast{display:block;height:3rem}.text a.podcast img{width:50%;max-width:200px}@media screen and (min-width:768px){.text .podcasts{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));grid-gap:1.5rem}.text a.podcast img{width:100%}}.text .tombstone{opacity:0}html,body{min-height:100vh}body{text-align:center}@media screen{body{color:#333;background-color:#fefefe}}@media print{body{color:#000;background:#fff}}@media screen{body{display:flex;flex-direction:column}main.page{width:100%;flex:1}}header.page,main.page,footer.page{text-align:left}.page-main,.contentblock{max-width:1200px;padding-left:1.5rem;padding-right:1.5rem;margin-left:auto;margin-right:auto}@media print{.page-main,.contentblock{padding:0}}@page{size:A4;padding:0;margin:3rem}.highlight{color:#004966}.nobr{white-space:nowrap}.aria-only{display:none}@media aural{.aria-only{display:block}}button{cursor:pointer;display:block;font-weight:700;margin:0 auto;border:.1rem solid #fe7f2d;background-color:#fe7f2d;font-size:1.2rem;border-radius:.9rem;padding:.6rem;transition:color .233s ease-in-out,background-color .233s ease-in-out}button:hover{background-color:#004966;border:.1rem solid #004966}blockquote{padding:0 2rem;margin:0 2rem}blockquote:before{display:block;content:"\1f5e8";font-size:2rem;padding:1rem 0 0;margin:0 0 -1.8rem -2rem;height:max-content;color:#fe7f2d;font-weight:700}a{color:#004966;font-weight:700;text-decoration-color:#004966;transition:color .233s ease-out,text-decoration-color .233s ease-out}a:hover,a:visited:hover{color:#fe7f2d;text-decoration-color:#fe7f2d}a:active{color:#fe7f2d;text-decoration-color:#fe7f2d}a:visited{color:#333}a.downloadbtn{text-decoration:none}html,body{font-family:Arial,sans-serif;scroll-behavior:smooth;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;line-height:1.5rem;font-feature-settings:"liga" 1;font-weight:400;font-size:18px}@media(min-width:900px){html,body{font-size:20px}}@media(min-width:1100px){html,body{font-size:22px}}@media(min-width:1800px){html,body{font-size:24px}}@media print{html,body{font-size:18px}}hr{border:0;height:2px;background-color:#fe7f2d;margin-top:1.5rem;margin-bottom:1.5rem}.text{position:relative}.text .meta{font-variant:small-caps}.text .meta .byline{display:none}.text .meta .line{display:inline-block}.text .meta .calendar{display:none}.text h1,.text h2,.text h3,.text h4,.text h5,.text h6{font-family:Georgia,palatino linotype,book antiqua,Palatino,times new roman,serif;font-weight:400;page-break-after:avoid}.text h1 a,.text h1 a:visited,.text h2 a,.text h2 a:visited,.text h3 a,.text h3 a:visited,.text h4 a,.text h4 a:visited,.text h5 a,.text h5 a:visited,.text h6 a,.text h6 a:visited{color:#333;text-decoration:none}.text p,.text ul,.text ol,.text figure,.text dl,.text hr{margin-top:.75rem;font-size:1rem;line-height:1.75rem}.text q{font-style:italic}.text ul ul{margin-top:0}.text p>code,.text ul>code,.text ol>code,.text dt>code,.text dd>code,.text li>code{color:#004966}.text audio{display:block;width:100%;height:1.5rem;outline:none}.text audio span{line-height:1.5rem}.text dl{overflow:auto;position:relative}.text dt{font-weight:700}.text dd{padding-left:2rem}.text dd+dt{margin-top:1.5rem}.text ul{list-style-type:disc;padding-left:1.5rem}.text ol{list-style-type:decimal;padding-left:1.5rem}.text p{overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.text h1{font-size:2rem;font-weight:400;line-height:2.5rem;margin-top:1.5rem;margin-bottom:0}@media screen and (min-width:760px){.text h1{font-size:2rem;line-height:2.5rem;margin-top:1.5rem}}@media screen and (min-width:900px){.text h1{font-size:2.5rem;line-height:3rem;margin-top:3rem}}@media screen and (min-width:1200px){.text h1{font-size:3rem;line-height:4rem;margin-top:3rem}}.text h2{font-size:1.5rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h3{font-size:1.25rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h4{font-size:1rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem;font-size:1.1rem}.text h5{font-size:.8rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h6{font-size:.6rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text strong{font-weight:700}.text em{font-style:italic}.text code{font-family:lucida console,Monaco,monospace;speak:literal-punctuation}.text abbr,.text acronym{speak:spell-out}.text del{text-decoration:line-through}.text ins{text-decoration:none;font-style:italic}.text figure{position:relative;text-align:center}.text figure img{background:#fff;border-radius:.2rem;max-width:100%}.text figure table{min-width:75%;border-radius:.2rem;margin-left:auto;margin-right:auto;border:#004966;border-collapse:separate;border-spacing:0;background:#fff;margin-bottom:-.1em}.text figure table th,.text figure table td{padding-left:.75rem;padding-right:.75rem;line-height:1.3rem;border-left:.1rem solid #004966;border-top:.1rem solid #004966}.text figure table thead{background-color:#fff}.text figure table tr td:last-child,.text figure table tr th:last-child{border-right:.1rem solid #004966}.text figure table tbody:last-child tr:last-child td{border-bottom:.1rem solid #004966}.text figure table thead:first-child tr:first-child th:first-child,.text figure table thead:first-child tr:first-child td:first-child{border-top-left-radius:.2rem}.text figure table thead:first-child tr:first-child,.text figure table thead:first-child tr:first-child th:last-child,.text figure table thead:first-child tr:first-child td:last-child{border-top-right-radius:.2rem}.text figure table tbody:last-child tr:last-child,.text figure table tbody:last-child tr:last-child td:first-child{border-bottom-left-radius:.2rem}.text figure table tbody:last-child tr:last-child,.text figure table tbody:last-child tr:last-child td:last-child{border-bottom-right-radius:.2rem}.text figure ul{text-align:left}.text figure ul.tree{padding-top:1.5em;padding-bottom:1.5em;border-radius:.2rem;background:#fff}.text figure ul.tree li{list-style-type:none}.text figure ul.tree .tree__item--folder::before{content:"ðŸ“";margin-right:.2em}.text figure ul.tree .tree__item--file::before{content:"ðŸ“";margin-right:.2em}.text figure figcaption{font-style:italic}.text pre{margin-top:1.5rem;font-size:inherit;line-height:1.5rem;padding:1.5rem 1.5rem .75rem;white-space:pre;overflow-x:scroll;overflow-y:hidden;scrollbar-color:#cccccc transparent;scrollbar-width:.75rem}.text pre::-webkit-scrollbar{margin-top:-.75rem;height:.75rem}.text pre::-webkit-scrollbar-track{background:0 0}.text pre::-webkit-scrollbar-thumb{height:.1rem;border-radius:.2rem;background:#ccc}.text hr{border:0;height:.2rem;background:#004966;margin-top:1.3rem}.text .admonition{position:relative}.text .admonition>*{padding-left:2rem}.text .admonition>:first-child::before{display:block;text-align:left;position:absolute;top:0;left:0;width:.75rem;font-size:1rem;line-height:1.5rem;height:1.5rem}.text .admonition--tip>:first-child::before{content:"â˜›";color:#fefefe;font-size:1.5rem;line-height:1.5rem;height:1.5rem}.text .admonition--warning>:first-child::before{content:"âš ï¸";color:#fefefe}.text .admonition--info>:first-child::before{content:"â“˜";color:#004966;font-weight:700}@media print{.text h1{margin-left:auto;margin-right:auto;margin-top:9rem;width:80%;font-variant:small-caps;text-align:center}.text--simple h1{margin-top:0}.text .meta{page-break-after:always;text-align:center;font-size:1.2rem;margin-top:1.5rem}.text .meta a{text-decoration:none}.text .meta time{display:none}.text .body p:first-of-type{margin-top:0}.text pre{padding:0;font-size:inherit;line-height:1.5rem;overflow:hidden;white-space:pre-wrap;word-break:break-all}}.text .podcasts{margin-top:1.5rem;text-align:center}.text a.podcast{display:block;height:3rem}.text a.podcast img{width:50%;max-width:200px}@media screen and (min-width:768px){.text .podcasts{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));grid-gap:1.5rem}.text a.podcast img{width:100%}}.text .tombstone{opacity:0}.cmp-revoke-consent{bottom:0!important;left:0!important;position:relative!important;padding:0!important}.page-header a{display:block;text-decoration:none;height:2.6rem;line-height:2.6rem;border-top:.2rem solid transparent;border-bottom:.2rem solid transparent}.page-header a,.page-header a span{transition:color .233s ease-in-out,border-bottom .233s,margin-bottom .233s}.page-header a:hover{color:#004966;border-bottom:.2rem solid #004966}.page-header a:hover span{color:#004966}.page-header a img{height:2.6rem}.page-header a{color:#333;border-bottom:0 solid #fefefe}.page-header a:hover{color:#004966;border-bottom-color:#004966}.page-header a:visited{color:#333}.page-header a{display:block;border-bottom-width:.2rem;font-weight:400;font-size:.8rem}.page-header .logo{z-index:6;font-size:1.2rem;font-weight:700;font-variant:small-caps}.page-header .logo a{margin-top:.2rem;text-decoration:none;display:block;border:none}#show-mobile-menu{display:none}.mobile-toggle{display:none}@media screen and (max-width:999px){header.page{box-shadow:0 0 3px rgba(168,168,168,.5)}.logo a{position:absolute}.page-header{justify-content:space-between;z-index:1}.page-header a{border-bottom-width:0}.hamburger-bar{height:.2rem;background:#333;margin-top:.2rem;display:block}#show-mobile-menu+.mobile-toggle+.mobile-menu nav{background:#fefefe}#show-mobile-menu+.mobile-toggle .hamburger-bar{transform:translateY(0)rotate(0);opacity:1;transition:transform .233s ease-in-out,opacity .233s ease-in-out}#show-mobile-menu:checked+.mobile-toggle{position:fixed;right:1.5rem}#show-mobile-menu:checked+.mobile-toggle .hamburger-bar:nth-of-type(1){transform:translateY(.4rem)rotate(315deg)}#show-mobile-menu:checked+.mobile-toggle .hamburger-bar:nth-of-type(2){opacity:0}#show-mobile-menu:checked+.mobile-toggle .hamburger-bar:nth-of-type(3){transform:translateY(-.4rem)rotate(405deg)}.mobile-toggle{cursor:pointer;display:block;width:1.2rem;height:1rem;z-index:5;margin-top:.75rem}.mobile-toggle label,.mobile-toggle .hamburger-bar{cursor:pointer}.mobile-menu{overflow:hidden;position:fixed;top:0;left:0;right:0;bottom:100vh;opacity:0;background:rgba(0,0,0,.5);transition:opacity .233s ease-in-out,border-bottom-color .233s ease-in-out}#show-mobile-menu:checked+.mobile-toggle+.mobile-menu{opacity:1;bottom:0}.hide-mobile-menu{display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:2}.mobile-menu nav{box-sizing:border-box;max-height:100%;position:absolute;top:0;left:0;right:0;z-index:3;font-size:1rem;line-height:3rem;padding:3rem 1.5rem 1.5rem;display:flex;flex-direction:column}.mobile-menu nav header{display:flex;flex-direction:row;font-size:inherit;line-height:inherit}.mobile-menu nav header h1{margin-top:0;font-size:1.2rem;line-height:1.5rem;flex:1;font-variant:small-caps}.mobile-menu nav header .hide-mobile-menu-aria{display:block;z-index:10;height:1.5rem;width:1.5rem}.mobile-menu nav ul{overflow-y:scroll;flex:1;scrollbar-width:none;-ms-overflow-style:none}.mobile-menu nav ul::-webkit-scrollbar{width:0;background:0 0}.mobile-menu nav a{font-weight:700;font-size:1rem}.mobile-menu nav a:hover{border-bottom:0;margin-bottom:0}}@media screen and (min-width:1000px){.page-header .mobile-toggle{display:none}.page-header .mobile-menu{flex:1}.page-header nav{flex:1}.page-header nav header{display:none}.page-header ul{list-style-type:none}.page-header nav ul{display:flex;align-items:end;justify-content:flex-end;flex-direction:row}.page-header nav li{padding-left:1.5rem}.page-header nav li.active a{border-bottom-width:3px;border-bottom-color:#004966}}@media screen{.page-header{position:relative;max-width:1200px;margin-left:auto;margin-right:auto;padding-left:1.5rem;padding-right:1.5rem;height:3rem;display:flex;flex-direction:row}}@media print{header.page{display:none}}@media screen and (max-width:999px) and (prefers-reduced-motion:reduce){.mobile-menu{transition:none}#show-mobile-menu+.mobile-toggle .hamburger-bar{transition:none}}@media screen and (max-width:999px) and (prefers-reduced-transparency:reduce){.mobile-menu{background:gray}}.page-header nav li{position:relative}.page-header nav li:hover ul.submenu__list{display:flex;z-index:999}.page-header nav ul.submenu__list{display:none;flex-direction:column;background:#fff;position:absolute;left:0}.page-header nav ul.submenu__list li{padding:0 20px}.page-header nav ul.submenu__list li a{white-space:nowrap}@media(max-width:768px){.page-header nav ul.submenu__list{display:flex;position:static}.page-header nav ul.submenu__list li a{font-weight:400}}html,body{font-family:Arial,sans-serif;scroll-behavior:smooth;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;line-height:1.5rem;font-feature-settings:"liga" 1;font-weight:400;font-size:18px}@media(min-width:900px){html,body{font-size:20px}}@media(min-width:1100px){html,body{font-size:22px}}@media(min-width:1800px){html,body{font-size:24px}}@media print{html,body{font-size:18px}}hr{border:0;height:2px;background-color:#fe7f2d;margin-top:1.5rem;margin-bottom:1.5rem}.text{position:relative}.text .meta{font-variant:small-caps}.text .meta .byline{display:none}.text .meta .line{display:inline-block}.text .meta .calendar{display:none}.text h1,.text h2,.text h3,.text h4,.text h5,.text h6{font-family:Georgia,palatino linotype,book antiqua,Palatino,times new roman,serif;font-weight:400;page-break-after:avoid}.text h1 a,.text h1 a:visited,.text h2 a,.text h2 a:visited,.text h3 a,.text h3 a:visited,.text h4 a,.text h4 a:visited,.text h5 a,.text h5 a:visited,.text h6 a,.text h6 a:visited{color:#333;text-decoration:none}.text p,.text ul,.text ol,.text figure,.text dl,.text hr{margin-top:.75rem;font-size:1rem;line-height:1.75rem}.text q{font-style:italic}.text ul ul{margin-top:0}.text p>code,.text ul>code,.text ol>code,.text dt>code,.text dd>code,.text li>code{color:#004966}.text audio{display:block;width:100%;height:1.5rem;outline:none}.text audio span{line-height:1.5rem}.text dl{overflow:auto;position:relative}.text dt{font-weight:700}.text dd{padding-left:2rem}.text dd+dt{margin-top:1.5rem}.text ul{list-style-type:disc;padding-left:1.5rem}.text ol{list-style-type:decimal;padding-left:1.5rem}.text p{overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.text h1{font-size:2rem;font-weight:400;line-height:2.5rem;margin-top:1.5rem;margin-bottom:0}@media screen and (min-width:760px){.text h1{font-size:2rem;line-height:2.5rem;margin-top:1.5rem}}@media screen and (min-width:900px){.text h1{font-size:2.5rem;line-height:3rem;margin-top:3rem}}@media screen and (min-width:1200px){.text h1{font-size:3rem;line-height:4rem;margin-top:3rem}}.text h2{font-size:1.5rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h3{font-size:1.25rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h4{font-size:1rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem;font-size:1.1rem}.text h5{font-size:.8rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h6{font-size:.6rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text strong{font-weight:700}.text em{font-style:italic}.text code{font-family:lucida console,Monaco,monospace;speak:literal-punctuation}.text abbr,.text acronym{speak:spell-out}.text del{text-decoration:line-through}.text ins{text-decoration:none;font-style:italic}.text figure{position:relative;text-align:center}.text figure img{background:#fff;border-radius:.2rem;max-width:100%}.text figure table{min-width:75%;border-radius:.2rem;margin-left:auto;margin-right:auto;border:#004966;border-collapse:separate;border-spacing:0;background:#fff;margin-bottom:-.1em}.text figure table th,.text figure table td{padding-left:.75rem;padding-right:.75rem;line-height:1.3rem;border-left:.1rem solid #004966;border-top:.1rem solid #004966}.text figure table thead{background-color:#fff}.text figure table tr td:last-child,.text figure table tr th:last-child{border-right:.1rem solid #004966}.text figure table tbody:last-child tr:last-child td{border-bottom:.1rem solid #004966}.text figure table thead:first-child tr:first-child th:first-child,.text figure table thead:first-child tr:first-child td:first-child{border-top-left-radius:.2rem}.text figure table thead:first-child tr:first-child,.text figure table thead:first-child tr:first-child th:last-child,.text figure table thead:first-child tr:first-child td:last-child{border-top-right-radius:.2rem}.text figure table tbody:last-child tr:last-child,.text figure table tbody:last-child tr:last-child td:first-child{border-bottom-left-radius:.2rem}.text figure table tbody:last-child tr:last-child,.text figure table tbody:last-child tr:last-child td:last-child{border-bottom-right-radius:.2rem}.text figure ul{text-align:left}.text figure ul.tree{padding-top:1.5em;padding-bottom:1.5em;border-radius:.2rem;background:#fff}.text figure ul.tree li{list-style-type:none}.text figure ul.tree .tree__item--folder::before{content:"ðŸ“";margin-right:.2em}.text figure ul.tree .tree__item--file::before{content:"ðŸ“";margin-right:.2em}.text figure figcaption{font-style:italic}.text pre{margin-top:1.5rem;font-size:inherit;line-height:1.5rem;padding:1.5rem 1.5rem .75rem;white-space:pre;overflow-x:scroll;overflow-y:hidden;scrollbar-color:#cccccc transparent;scrollbar-width:.75rem}.text pre::-webkit-scrollbar{margin-top:-.75rem;height:.75rem}.text pre::-webkit-scrollbar-track{background:0 0}.text pre::-webkit-scrollbar-thumb{height:.1rem;border-radius:.2rem;background:#ccc}.text hr{border:0;height:.2rem;background:#004966;margin-top:1.3rem}.text .admonition{position:relative}.text .admonition>*{padding-left:2rem}.text .admonition>:first-child::before{display:block;text-align:left;position:absolute;top:0;left:0;width:.75rem;font-size:1rem;line-height:1.5rem;height:1.5rem}.text .admonition--tip>:first-child::before{content:"â˜›";color:#fefefe;font-size:1.5rem;line-height:1.5rem;height:1.5rem}.text .admonition--warning>:first-child::before{content:"âš ï¸";color:#fefefe}.text .admonition--info>:first-child::before{content:"â“˜";color:#004966;font-weight:700}@media print{.text h1{margin-left:auto;margin-right:auto;margin-top:9rem;width:80%;font-variant:small-caps;text-align:center}.text--simple h1{margin-top:0}.text .meta{page-break-after:always;text-align:center;font-size:1.2rem;margin-top:1.5rem}.text .meta a{text-decoration:none}.text .meta time{display:none}.text .body p:first-of-type{margin-top:0}.text pre{padding:0;font-size:inherit;line-height:1.5rem;overflow:hidden;white-space:pre-wrap;word-break:break-all}}.text .podcasts{margin-top:1.5rem;text-align:center}.text a.podcast{display:block;height:3rem}.text a.podcast img{width:50%;max-width:200px}@media screen and (min-width:768px){.text .podcasts{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));grid-gap:1.5rem}.text a.podcast img{width:100%}}.text .tombstone{opacity:0}html,body{min-height:100vh}body{text-align:center}@media screen{body{color:#333;background-color:#fefefe}}@media print{body{color:#000;background:#fff}}@media screen{body{display:flex;flex-direction:column}main.page{width:100%;flex:1}}header.page,main.page,footer.page{text-align:left}.page-main,.contentblock{max-width:1200px;padding-left:1.5rem;padding-right:1.5rem;margin-left:auto;margin-right:auto}@media print{.page-main,.contentblock{padding:0}}@page{size:A4;padding:0;margin:3rem}.highlight{color:#004966}.nobr{white-space:nowrap}.aria-only{display:none}@media aural{.aria-only{display:block}}.cmp-revoke-consent{bottom:0!important;left:0!important;position:relative!important;padding:0!important}footer.page{margin-top:1.5rem}footer.page h2{font-size:1rem}@media not print{footer.page{margin-top:1.5rem/2;padding-top:1.5rem/2;padding-bottom:1.5rem/2}.page-footer{max-width:1200px;padding-left:1.5rem;padding-right:1.5rem;margin-left:auto;margin-right:auto;font-size:.7rem;line-height:1.5rem}}@media not print{.page-footer ul{margin-bottom:1.5rem}.page-footer a{display:block;text-decoration:none;height:2.6rem;line-height:2.6rem;border-top:.2rem solid transparent;border-bottom:.2rem solid transparent}.page-footer a,.page-footer a span{transition:color .233s ease-in-out,border-bottom .233s,margin-bottom .233s}.page-footer a:hover{color:#004966;border-bottom:.2rem solid #004966}.page-footer a:hover span{color:#004966}.page-footer a img{height:2.6rem}.page-footer nav ul{display:flex;flex-direction:row;align-items:center;justify-content:center;flex-wrap:wrap;margin-bottom:0;height:1.5rem;line-height:.5rem}.page-footer nav ul a{height:1.3rem;line-height:1.3rem;text-align:center;display:block;padding-left:.75rem;padding-right:.75rem;border-bottom:.2rem solid transparent}}@media print{footer.page nav{display:none}footer.page aside{border-top:.2rem solid #333;margin-top:.65rem;padding-top:.65rem}}footer.page{border-top:2px solid #fe7f2d;margin-top:-2px}footer.page aside{text-align:center;font-size:.6rem;line-height:1.5rem;color:#333}@media screen{footer.page{background-color:#fefefe}.page-footer a{color:#333;border-bottom:0 solid #fefefe}.page-footer a:hover{color:#004966;border-bottom-color:#004966}.page-footer a:visited{color:#333}}@media screen and (max-width:570px){footer.page aside{margin-top:10%}}@media screen and (max-width:370px){footer.page aside{margin-top:20%}}.youtubeList__container{display:flex;flex-direction:row;justify-content:flex-start;margin-bottom:1.5rem}.youtubeList__container .youtubeList__img{margin-right:1rem}.grid{display:grid;gap:1.5rem 1.5rem;font-size:.9rem;margin-bottom:1.5rem;margin-top:1.5rem}.grid--2{grid-template-columns:1fr 1fr}.grid--3{grid-template-columns:1fr 1fr 1fr}.grid--4{grid-template-columns:1fr 1fr 1fr 1fr}.grid img{max-width:100%}.grid h2{font-size:1rem;line-height:1.25rem;margin-bottom:.75rem}.grid p{font-size:.75rem;line-height:1rem;font-weight:400;margin-bottom:.75rem}.grid ul{margin-left:1rem}.grid ul li{list-style-type:disc}@media(max-width:768px){.grid__item{margin-bottom:1rem}.grid--2{display:block}}@media(max-width:1200px){.grid--3{display:block}}@media(max-width:1200px){.grid--4{display:block}}.grid-links{display:grid;gap:1.5rem 1.5rem;font-size:.9rem;margin-bottom:1.5rem;margin-top:1.5rem}.grid-links--2{grid-template-columns:1fr 1fr}.grid-links--3{grid-template-columns:1fr 1fr 1fr}.grid-links--4{grid-template-columns:1fr 1fr 1fr 1fr}.grid-links img{max-width:100%}.grid-links h2{font-size:1.2rem;margin-bottom:.75rem}.grid-links p{margin-bottom:.75rem}.grid-links ul{margin-left:1rem}.grid-links ul li{list-style-type:disc}@media(max-width:768px){.grid-links--2{display:block}}@media(max-width:1000px){.grid-links--3{display:block}}@media(max-width:1000px){.grid-links--4{display:block}}.post--preview{display:block;border-radius:.3rem;padding-bottom:.375rem}.post--preview img{margin-bottom:.375rem}.post--preview h2,.post--preview h3,.post--preview p{padding-left:.5rem;padding-right:.5rem}.post--preview :last-child{margin-bottom:0}.post--preview:hover{box-shadow:0 0 1.5rem #7f7f7f}a.post--preview,a.post--preview *{text-decoration:none;color:#333}a.post--preview .readmore,a.post--preview * .readmore{font-weight:700}.recommendations{margin-top:2rem}.text .grid h2{font-size:1rem;line-height:1.25rem;margin-bottom:.75rem;margin-top:0;font-weight:700}.text .post__content p{font-size:.75rem;line-height:1rem;font-weight:400}.text .post__content .readmore{font-weight:700}.comments .comment{padding:2em;background:#f5f5f5;border-radius:3%;margin-bottom:2em}.comments .info{margin-bottom:2em}.comments .info a{font-size:1.2em}.comments .info span{float:right;color:#9c98a8;font-style:italic}.banner{background-color:#004966;background-position:50%;background-repeat:no-repeat;background-size:cover;color:#fff}.banner h1{margin-bottom:1.5rem}.banner .banner__content{max-width:1200px;padding:1.5rem;margin-left:auto;margin-right:auto}.banner .banner__grid{display:grid;gap:1.5rem 1.5rem;grid-template-columns:9fr 3fr;margin-top:1.5rem;margin-bottom:1.5rem}@media screen and (max-width:1000px){.banner .banner__grid{display:block}}.banner .banner__text{font-size:1.2rem;background:rgba(0,0,0,.7);padding:1.5rem;border-radius:.75rem}.banner .banner__text h1{font-size:1.5rem}.banner .banner__text p{margin-top:1.5rem}.banner .banner__text p:first-child{margin-top:0}.banner .banner__text small{font-size:.8rem}.banner .banner__text.opaque{background:rgba(0,0,0,.95)}.banner .banner__text small{font-size:.8rem}.banner .banner__icon{float:right;text-align:center}@media screen and (max-width:1000px){.banner .banner__icon{display:none}}.banner a{color:#fff;font-weight:700;border-bottom:2px solid #004966;text-decoration:none;transition:color .233s ease-out,border-bottom-color .233s ease-out}.banner a:hover,.banner a:visited:hover{color:#fff;border-bottom-color:#fe7f2d}table{border:1px solid #ccc;border-collapse:collapse;margin-top:2rem;padding:0;width:100%;table-layout:fixed}table caption{font-size:1.5em;margin:.5em 0 .75em}table tr{background-color:#f8f8f8;border:1px solid #ddd;padding:.35em}table th,table td{padding:.625em;text-align:left}table th{font-size:1em;letter-spacing:.1em;text-transform:uppercase}@media screen and (max-width:600px){table{border:0}table caption{font-size:1.3em}table thead{border:none;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}table tr{border-bottom:3px solid #ddd;display:block;margin-bottom:.625em}table td{border-bottom:1px solid #ddd;display:block;font-size:1em;text-align:left}table td::before{content:attr(data-label);float:left;font-weight:700;text-transform:uppercase}table td:last-child{border-bottom:0}}.hero{background-color:#004966;background-position:50%;background-repeat:no-repeat;background-size:cover;color:#fff}.hero h1{margin-bottom:1.5rem;line-height:2.5rem}.hero h2{margin-top:1rem;margin-bottom:1rem}.hero h2{margin-top:1rem;margin-bottom:1rem}.hero a{color:#fff;font-weight:700;border-bottom:2px solid #004966;text-decoration:none;transition:color .233s ease-out,border-bottom-color .233s ease-out}.hero a:hover,.hero a:visited:hover{color:#fff;border-bottom-color:#fe7f2d}@media screen and (max-width:767px){.hero figure{position:relative;text-align:center}}.hero img{float:left;margin-right:1.5rem;max-width:100%}@media screen and (max-width:767px){.hero img{float:none;margin-left:auto;margin-right:auto;display:block}}.hero h2+p+figure img{position:relative;top:-3rem}@media screen and (max-width:767px){.hero h2+p+figure img{top:0}}.hero:nth-child(4n+2),.hero:nth-child(4n+4){background-color:initial;color:#333}.hero:nth-child(4n+2) img,.hero:nth-child(4n+4) img{float:right;margin-right:0;margin-left:1.5rem}@media screen and (max-width:767px){.hero:nth-child(4n+2) img,.hero:nth-child(4n+4) img{float:none;margin-left:auto;margin-right:auto}}.hero:nth-child(4n+2) a,.hero:nth-child(4n+4) a{color:#333}.hero:nth-child(4n+2) a:hover,.hero:nth-child(4n+4) a:hover{color:#333}.hero:nth-child(4n+3){background-color:#fe7f2d}.hero--bio .contentblock{text-align:center}.hero--bio .contentblock img{text-align:center;float:none;margin-bottom:1.5rem}.hero--bio .contentblock p{text-align:left}@media(min-width:769px){.hero--bio .contentblock{min-height:240px;text-align:left}.hero--bio .contentblock img{float:right;margin-left:1.5rem;margin-bottom:0}}.contentblock{padding-top:2rem;padding-bottom:2rem}.herotext{font-size:1.2rem;background:rgba(0,0,0,.7);padding:1.5rem;border-radius:.75rem}.herotext p{margin-top:1.5rem}.herotext p:first-child{margin-top:0}.herotext small{font-size:.8rem}.herotext.opaque{background:rgba(0,0,0,.95)}html,body{font-family:Arial,sans-serif;scroll-behavior:smooth;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;line-height:1.5rem;font-feature-settings:"liga" 1;font-weight:400;font-size:18px}@media(min-width:900px){html,body{font-size:20px}}@media(min-width:1100px){html,body{font-size:22px}}@media(min-width:1800px){html,body{font-size:24px}}@media print{html,body{font-size:18px}}hr{border:0;height:2px;background-color:#fe7f2d;margin-top:1.5rem;margin-bottom:1.5rem}.text{position:relative}.text .meta{font-variant:small-caps}.text .meta .byline{display:none}.text .meta .line{display:inline-block}.text .meta .calendar{display:none}.text h1,.text h2,.text h3,.text h4,.text h5,.text h6{font-family:Georgia,palatino linotype,book antiqua,Palatino,times new roman,serif;font-weight:400;page-break-after:avoid}.text h1 a,.text h1 a:visited,.text h2 a,.text h2 a:visited,.text h3 a,.text h3 a:visited,.text h4 a,.text h4 a:visited,.text h5 a,.text h5 a:visited,.text h6 a,.text h6 a:visited{color:#333;text-decoration:none}.text p,.text ul,.text ol,.text figure,.text dl,.text hr{margin-top:.75rem;font-size:1rem;line-height:1.75rem}.text q{font-style:italic}.text ul ul{margin-top:0}.text p>code,.text ul>code,.text ol>code,.text dt>code,.text dd>code,.text li>code{color:#004966}.text audio{display:block;width:100%;height:1.5rem;outline:none}.text audio span{line-height:1.5rem}.text dl{overflow:auto;position:relative}.text dt{font-weight:700}.text dd{padding-left:2rem}.text dd+dt{margin-top:1.5rem}.text ul{list-style-type:disc;padding-left:1.5rem}.text ol{list-style-type:decimal;padding-left:1.5rem}.text p{overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.text h1{font-size:2rem;font-weight:400;line-height:2.5rem;margin-top:1.5rem;margin-bottom:0}@media screen and (min-width:760px){.text h1{font-size:2rem;line-height:2.5rem;margin-top:1.5rem}}@media screen and (min-width:900px){.text h1{font-size:2.5rem;line-height:3rem;margin-top:3rem}}@media screen and (min-width:1200px){.text h1{font-size:3rem;line-height:4rem;margin-top:3rem}}.text h2{font-size:1.5rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h3{font-size:1.25rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h4{font-size:1rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem;font-size:1.1rem}.text h5{font-size:.8rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h6{font-size:.6rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text strong{font-weight:700}.text em{font-style:italic}.text code{font-family:lucida console,Monaco,monospace;speak:literal-punctuation}.text abbr,.text acronym{speak:spell-out}.text del{text-decoration:line-through}.text ins{text-decoration:none;font-style:italic}.text figure{position:relative;text-align:center}.text figure img{background:#fff;border-radius:.2rem;max-width:100%}.text figure table{min-width:75%;border-radius:.2rem;margin-left:auto;margin-right:auto;border:#004966;border-collapse:separate;border-spacing:0;background:#fff;margin-bottom:-.1em}.text figure table th,.text figure table td{padding-left:.75rem;padding-right:.75rem;line-height:1.3rem;border-left:.1rem solid #004966;border-top:.1rem solid #004966}.text figure table thead{background-color:#fff}.text figure table tr td:last-child,.text figure table tr th:last-child{border-right:.1rem solid #004966}.text figure table tbody:last-child tr:last-child td{border-bottom:.1rem solid #004966}.text figure table thead:first-child tr:first-child th:first-child,.text figure table thead:first-child tr:first-child td:first-child{border-top-left-radius:.2rem}.text figure table thead:first-child tr:first-child,.text figure table thead:first-child tr:first-child th:last-child,.text figure table thead:first-child tr:first-child td:last-child{border-top-right-radius:.2rem}.text figure table tbody:last-child tr:last-child,.text figure table tbody:last-child tr:last-child td:first-child{border-bottom-left-radius:.2rem}.text figure table tbody:last-child tr:last-child,.text figure table tbody:last-child tr:last-child td:last-child{border-bottom-right-radius:.2rem}.text figure ul{text-align:left}.text figure ul.tree{padding-top:1.5em;padding-bottom:1.5em;border-radius:.2rem;background:#fff}.text figure ul.tree li{list-style-type:none}.text figure ul.tree .tree__item--folder::before{content:"ðŸ“";margin-right:.2em}.text figure ul.tree .tree__item--file::before{content:"ðŸ“";margin-right:.2em}.text figure figcaption{font-style:italic}.text pre{margin-top:1.5rem;font-size:inherit;line-height:1.5rem;padding:1.5rem 1.5rem .75rem;white-space:pre;overflow-x:scroll;overflow-y:hidden;scrollbar-color:#cccccc transparent;scrollbar-width:.75rem}.text pre::-webkit-scrollbar{margin-top:-.75rem;height:.75rem}.text pre::-webkit-scrollbar-track{background:0 0}.text pre::-webkit-scrollbar-thumb{height:.1rem;border-radius:.2rem;background:#ccc}.text hr{border:0;height:.2rem;background:#004966;margin-top:1.3rem}.text .admonition{position:relative}.text .admonition>*{padding-left:2rem}.text .admonition>:first-child::before{display:block;text-align:left;position:absolute;top:0;left:0;width:.75rem;font-size:1rem;line-height:1.5rem;height:1.5rem}.text .admonition--tip>:first-child::before{content:"â˜›";color:#fefefe;font-size:1.5rem;line-height:1.5rem;height:1.5rem}.text .admonition--warning>:first-child::before{content:"âš ï¸";color:#fefefe}.text .admonition--info>:first-child::before{content:"â“˜";color:#004966;font-weight:700}@media print{.text h1{margin-left:auto;margin-right:auto;margin-top:9rem;width:80%;font-variant:small-caps;text-align:center}.text--simple h1{margin-top:0}.text .meta{page-break-after:always;text-align:center;font-size:1.2rem;margin-top:1.5rem}.text .meta a{text-decoration:none}.text .meta time{display:none}.text .body p:first-of-type{margin-top:0}.text pre{padding:0;font-size:inherit;line-height:1.5rem;overflow:hidden;white-space:pre-wrap;word-break:break-all}}.text .podcasts{margin-top:1.5rem;text-align:center}.text a.podcast{display:block;height:3rem}.text a.podcast img{width:50%;max-width:200px}@media screen and (min-width:768px){.text .podcasts{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));grid-gap:1.5rem}.text a.podcast img{width:100%}}.text .tombstone{opacity:0}.paginator{margin-top:1.5rem;text-align:center}.paginator a{display:inline-block;text-decoration:none;border-radius:3px;color:#333;border:1px solid #333;transition:.2s background-color ease-in-out,.2s color ease-in-out,.2s border-color ease-in-out;height:1.5rem;width:1.5rem;line-height:1.5rem;font-size:1rem;margin-left:.2rem;margin-right:.2rem}.paginator a:hover,.paginator a.active{background:#004966;color:#fefefe;border:1px solid #004966}@media screen and (min-width:768px){.paginator a{height:1.5rem;width:1.5rem;line-height:1.5rem;font-size:1rem}}@media screen and (min-width:900px){.paginator a{height:3rem;width:3rem;line-height:3rem;font-size:1.2rem}}html,body{font-family:Arial,sans-serif;scroll-behavior:smooth;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;line-height:1.5rem;font-feature-settings:"liga" 1;font-weight:400;font-size:18px}@media(min-width:900px){html,body{font-size:20px}}@media(min-width:1100px){html,body{font-size:22px}}@media(min-width:1800px){html,body{font-size:24px}}@media print{html,body{font-size:18px}}hr{border:0;height:2px;background-color:#fe7f2d;margin-top:1.5rem;margin-bottom:1.5rem}.text{position:relative}.text .meta{font-variant:small-caps}.text .meta .byline{display:none}.text .meta .line{display:inline-block}.text .meta .calendar{display:none}.text h1,.text h2,.text h3,.text h4,.text h5,.text h6{font-family:Georgia,palatino linotype,book antiqua,Palatino,times new roman,serif;font-weight:400;page-break-after:avoid}.text h1 a,.text h1 a:visited,.text h2 a,.text h2 a:visited,.text h3 a,.text h3 a:visited,.text h4 a,.text h4 a:visited,.text h5 a,.text h5 a:visited,.text h6 a,.text h6 a:visited{color:#333;text-decoration:none}.text p,.text ul,.text ol,.text figure,.text dl,.text hr{margin-top:.75rem;font-size:1rem;line-height:1.75rem}.text q{font-style:italic}.text ul ul{margin-top:0}.text p>code,.text ul>code,.text ol>code,.text dt>code,.text dd>code,.text li>code{color:#004966}.text audio{display:block;width:100%;height:1.5rem;outline:none}.text audio span{line-height:1.5rem}.text dl{overflow:auto;position:relative}.text dt{font-weight:700}.text dd{padding-left:2rem}.text dd+dt{margin-top:1.5rem}.text ul{list-style-type:disc;padding-left:1.5rem}.text ol{list-style-type:decimal;padding-left:1.5rem}.text p{overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.text h1{font-size:2rem;font-weight:400;line-height:2.5rem;margin-top:1.5rem;margin-bottom:0}@media screen and (min-width:760px){.text h1{font-size:2rem;line-height:2.5rem;margin-top:1.5rem}}@media screen and (min-width:900px){.text h1{font-size:2.5rem;line-height:3rem;margin-top:3rem}}@media screen and (min-width:1200px){.text h1{font-size:3rem;line-height:4rem;margin-top:3rem}}.text h2{font-size:1.5rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h3{font-size:1.25rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h4{font-size:1rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem;font-size:1.1rem}.text h5{font-size:.8rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h6{font-size:.6rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text strong{font-weight:700}.text em{font-style:italic}.text code{font-family:lucida console,Monaco,monospace;speak:literal-punctuation}.text abbr,.text acronym{speak:spell-out}.text del{text-decoration:line-through}.text ins{text-decoration:none;font-style:italic}.text figure{position:relative;text-align:center}.text figure img{background:#fff;border-radius:.2rem;max-width:100%}.text figure table{min-width:75%;border-radius:.2rem;margin-left:auto;margin-right:auto;border:#004966;border-collapse:separate;border-spacing:0;background:#fff;margin-bottom:-.1em}.text figure table th,.text figure table td{padding-left:.75rem;padding-right:.75rem;line-height:1.3rem;border-left:.1rem solid #004966;border-top:.1rem solid #004966}.text figure table thead{background-color:#fff}.text figure table tr td:last-child,.text figure table tr th:last-child{border-right:.1rem solid #004966}.text figure table tbody:last-child tr:last-child td{border-bottom:.1rem solid #004966}.text figure table thead:first-child tr:first-child th:first-child,.text figure table thead:first-child tr:first-child td:first-child{border-top-left-radius:.2rem}.text figure table thead:first-child tr:first-child,.text figure table thead:first-child tr:first-child th:last-child,.text figure table thead:first-child tr:first-child td:last-child{border-top-right-radius:.2rem}.text figure table tbody:last-child tr:last-child,.text figure table tbody:last-child tr:last-child td:first-child{border-bottom-left-radius:.2rem}.text figure table tbody:last-child tr:last-child,.text figure table tbody:last-child tr:last-child td:last-child{border-bottom-right-radius:.2rem}.text figure ul{text-align:left}.text figure ul.tree{padding-top:1.5em;padding-bottom:1.5em;border-radius:.2rem;background:#fff}.text figure ul.tree li{list-style-type:none}.text figure ul.tree .tree__item--folder::before{content:"ðŸ“";margin-right:.2em}.text figure ul.tree .tree__item--file::before{content:"ðŸ“";margin-right:.2em}.text figure figcaption{font-style:italic}.text pre{margin-top:1.5rem;font-size:inherit;line-height:1.5rem;padding:1.5rem 1.5rem .75rem;white-space:pre;overflow-x:scroll;overflow-y:hidden;scrollbar-color:#cccccc transparent;scrollbar-width:.75rem}.text pre::-webkit-scrollbar{margin-top:-.75rem;height:.75rem}.text pre::-webkit-scrollbar-track{background:0 0}.text pre::-webkit-scrollbar-thumb{height:.1rem;border-radius:.2rem;background:#ccc}.text hr{border:0;height:.2rem;background:#004966;margin-top:1.3rem}.text .admonition{position:relative}.text .admonition>*{padding-left:2rem}.text .admonition>:first-child::before{display:block;text-align:left;position:absolute;top:0;left:0;width:.75rem;font-size:1rem;line-height:1.5rem;height:1.5rem}.text .admonition--tip>:first-child::before{content:"â˜›";color:#fefefe;font-size:1.5rem;line-height:1.5rem;height:1.5rem}.text .admonition--warning>:first-child::before{content:"âš ï¸";color:#fefefe}.text .admonition--info>:first-child::before{content:"â“˜";color:#004966;font-weight:700}@media print{.text h1{margin-left:auto;margin-right:auto;margin-top:9rem;width:80%;font-variant:small-caps;text-align:center}.text--simple h1{margin-top:0}.text .meta{page-break-after:always;text-align:center;font-size:1.2rem;margin-top:1.5rem}.text .meta a{text-decoration:none}.text .meta time{display:none}.text .body p:first-of-type{margin-top:0}.text pre{padding:0;font-size:inherit;line-height:1.5rem;overflow:hidden;white-space:pre-wrap;word-break:break-all}}.text .podcasts{margin-top:1.5rem;text-align:center}.text a.podcast{display:block;height:3rem}.text a.podcast img{width:50%;max-width:200px}@media screen and (min-width:768px){.text .podcasts{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));grid-gap:1.5rem}.text a.podcast img{width:100%}}.text .tombstone{opacity:0}html,body{min-height:100vh}body{text-align:center}@media screen{body{color:#333;background-color:#fefefe}}@media print{body{color:#000;background:#fff}}@media screen{body{display:flex;flex-direction:column}main.page{width:100%;flex:1}}header.page,main.page,footer.page{text-align:left}.page-main,.contentblock{max-width:1200px;padding-left:1.5rem;padding-right:1.5rem;margin-left:auto;margin-right:auto}@media print{.page-main,.contentblock{padding:0}}@page{size:A4;padding:0;margin:3rem}.highlight{color:#004966}.nobr{white-space:nowrap}.aria-only{display:none}@media aural{.aria-only{display:block}}.edit-on-github{font-size:.8rem;text-align:right;padding-top:1.5rem}.edit-on-github .container{max-width:1200px;padding-left:1.5rem;padding-right:1.5rem;margin-left:auto;margin-right:auto}@media print{.edit-on-github .container{padding:0}}.edit-on-github a{background-color:#fe7f2d;color:#fefefe;text-decoration:none;display:inline-block;border-top-left-radius:.5rem;border-top-right-radius:.5rem;padding-left:.5rem;padding-right:.5rem;transition:.2s background-color ease-in-out}.edit-on-github a:hover{color:#fefefe;background-color:#004966}a.socialblock{display:block;border:0;line-height:1.5rem;position:relative;text-align:center}.hero a.socialblock img{float:none;display:block;margin-left:auto;margin-right:auto;height:3rem;width:3rem}.sharing{margin-top:1em}.sharing .resp-sharing-button__link,.sharing .resp-sharing-button__icon{display:inline-block}.sharing .resp-sharing-button__link{text-decoration:none;color:#fff;margin:.5em}.sharing .resp-sharing-button{border-radius:5px;transition:25ms ease-out;padding-right:.75em;padding-top:.1em}.sharing .resp-sharing-button span{font-size:.75em}@media screen and (max-width:798px){.sharing .resp-sharing-button span{display:none}}.sharing .resp-sharing-button__icon svg{width:1em;height:1em;margin:.4em;margin-top:.3em;vertical-align:top}.sharing .resp-sharing-button--small svg{margin:0;vertical-align:middle}.sharing .resp-sharing-button__icon{stroke:#fff;fill:none}.sharing .resp-sharing-button__icon--solid,.sharing .resp-sharing-button__icon--solidcircle{fill:#fff;stroke:none}.sharing .resp-sharing-button--twitter{background-color:#55acee}.sharing .resp-sharing-button--twitter:hover{background-color:#2795e9}.sharing .resp-sharing-button--pinterest{background-color:#bd081c}.sharing .resp-sharing-button--pinterest:hover{background-color:#8c0615}.sharing .resp-sharing-button--facebook{background-color:#3b5998}.sharing .resp-sharing-button--facebook:hover{background-color:#2d4373}.sharing .resp-sharing-button--tumblr{background-color:#35465c}.sharing .resp-sharing-button--tumblr:hover{background-color:#222d3c}.sharing .resp-sharing-button--reddit{background-color:#5f99cf}.sharing .resp-sharing-button--reddit:hover{background-color:#3a80c1}.sharing .resp-sharing-button--google{background-color:#dd4b39}.sharing .resp-sharing-button--google:hover{background-color:#c23321}.sharing .resp-sharing-button--linkedin{background-color:#0077b5}.sharing .resp-sharing-button--linkedin:hover{background-color:#046293}.sharing .resp-sharing-button--email{background-color:#777}.sharing .resp-sharing-button--email:hover{background-color:#5e5e5e}.sharing .resp-sharing-button--xing{background-color:#1a7576}.sharing .resp-sharing-button--xing:hover{background-color:#114c4c}.sharing .resp-sharing-button--whatsapp{background-color:#25d366}.sharing .resp-sharing-button--whatsapp:hover{background-color:#1da851}.sharing .resp-sharing-button--hackernews{background-color:#f60}.sharing .resp-sharing-button--hackernews:hover,.sharing .resp-sharing-button--hackernews:focus{background-color:#fb6200}.sharing .resp-sharing-button--vk{background-color:#507299}.sharing .resp-sharing-button--vk:hover{background-color:#43648c}.sharing .resp-sharing-button--facebook{background-color:#3b5998;border-color:#3b5998}.sharing .resp-sharing-button--facebook:hover,.sharing .resp-sharing-button--facebook:active{background-color:#2d4373;border-color:#2d4373}.sharing .resp-sharing-button--twitter{background-color:#55acee;border-color:#55acee}.sharing .resp-sharing-button--twitter:hover,.sharing .resp-sharing-button--twitter:active{background-color:#2795e9;border-color:#2795e9}.sharing .resp-sharing-button--linkedin{background-color:#0077b5;border-color:#0077b5}.sharing .resp-sharing-button--linkedin:hover,.sharing .resp-sharing-button--linkedin:active{background-color:#046293;border-color:#046293}.sharing .resp-sharing-button--telegram{background-color:#54a9eb}.sharing .resp-sharing-button--telegram:hover{background-color:#4b97d1}html,body{font-family:Arial,sans-serif;scroll-behavior:smooth;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;line-height:1.5rem;font-feature-settings:"liga" 1;font-weight:400;font-size:18px}@media(min-width:900px){html,body{font-size:20px}}@media(min-width:1100px){html,body{font-size:22px}}@media(min-width:1800px){html,body{font-size:24px}}@media print{html,body{font-size:18px}}hr{border:0;height:2px;background-color:#fe7f2d;margin-top:1.5rem;margin-bottom:1.5rem}.text{position:relative}.text .meta{font-variant:small-caps}.text .meta .byline{display:none}.text .meta .line{display:inline-block}.text .meta .calendar{display:none}.text h1,.text h2,.text h3,.text h4,.text h5,.text h6{font-family:Georgia,palatino linotype,book antiqua,Palatino,times new roman,serif;font-weight:400;page-break-after:avoid}.text h1 a,.text h1 a:visited,.text h2 a,.text h2 a:visited,.text h3 a,.text h3 a:visited,.text h4 a,.text h4 a:visited,.text h5 a,.text h5 a:visited,.text h6 a,.text h6 a:visited{color:#333;text-decoration:none}.text p,.text ul,.text ol,.text figure,.text dl,.text hr{margin-top:.75rem;font-size:1rem;line-height:1.75rem}.text q{font-style:italic}.text ul ul{margin-top:0}.text p>code,.text ul>code,.text ol>code,.text dt>code,.text dd>code,.text li>code{color:#004966}.text audio{display:block;width:100%;height:1.5rem;outline:none}.text audio span{line-height:1.5rem}.text dl{overflow:auto;position:relative}.text dt{font-weight:700}.text dd{padding-left:2rem}.text dd+dt{margin-top:1.5rem}.text ul{list-style-type:disc;padding-left:1.5rem}.text ol{list-style-type:decimal;padding-left:1.5rem}.text p{overflow-wrap:break-word;word-wrap:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.text h1{font-size:2rem;font-weight:400;line-height:2.5rem;margin-top:1.5rem;margin-bottom:0}@media screen and (min-width:760px){.text h1{font-size:2rem;line-height:2.5rem;margin-top:1.5rem}}@media screen and (min-width:900px){.text h1{font-size:2.5rem;line-height:3rem;margin-top:3rem}}@media screen and (min-width:1200px){.text h1{font-size:3rem;line-height:4rem;margin-top:3rem}}.text h2{font-size:1.5rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h3{font-size:1.25rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h4{font-size:1rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem;font-size:1.1rem}.text h5{font-size:.8rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text h6{font-size:.6rem;line-height:2rem;margin-top:2rem;margin-bottom:1.5rem}.text strong{font-weight:700}.text em{font-style:italic}.text code{font-family:lucida console,Monaco,monospace;speak:literal-punctuation}.text abbr,.text acronym{speak:spell-out}.text del{text-decoration:line-through}.text ins{text-decoration:none;font-style:italic}.text figure{position:relative;text-align:center}.text figure img{background:#fff;border-radius:.2rem;max-width:100%}.text figure table{min-width:75%;border-radius:.2rem;margin-left:auto;margin-right:auto;border:#004966;border-collapse:separate;border-spacing:0;background:#fff;margin-bottom:-.1em}.text figure table th,.text figure table td{padding-left:.75rem;padding-right:.75rem;line-height:1.3rem;border-left:.1rem solid #004966;border-top:.1rem solid #004966}.text figure table thead{background-color:#fff}.text figure table tr td:last-child,.text figure table tr th:last-child{border-right:.1rem solid #004966}.text figure table tbody:last-child tr:last-child td{border-bottom:.1rem solid #004966}.text figure table thead:first-child tr:first-child th:first-child,.text figure table thead:first-child tr:first-child td:first-child{border-top-left-radius:.2rem}.text figure table thead:first-child tr:first-child,.text figure table thead:first-child tr:first-child th:last-child,.text figure table thead:first-child tr:first-child td:last-child{border-top-right-radius:.2rem}.text figure table tbody:last-child tr:last-child,.text figure table tbody:last-child tr:last-child td:first-child{border-bottom-left-radius:.2rem}.text figure table tbody:last-child tr:last-child,.text figure table tbody:last-child tr:last-child td:last-child{border-bottom-right-radius:.2rem}.text figure ul{text-align:left}.text figure ul.tree{padding-top:1.5em;padding-bottom:1.5em;border-radius:.2rem;background:#fff}.text figure ul.tree li{list-style-type:none}.text figure ul.tree .tree__item--folder::before{content:"ðŸ“";margin-right:.2em}.text figure ul.tree .tree__item--file::before{content:"ðŸ“";margin-right:.2em}.text figure figcaption{font-style:italic}.text pre{margin-top:1.5rem;font-size:inherit;line-height:1.5rem;padding:1.5rem 1.5rem .75rem;white-space:pre;overflow-x:scroll;overflow-y:hidden;scrollbar-color:#cccccc transparent;scrollbar-width:.75rem}.text pre::-webkit-scrollbar{margin-top:-.75rem;height:.75rem}.text pre::-webkit-scrollbar-track{background:0 0}.text pre::-webkit-scrollbar-thumb{height:.1rem;border-radius:.2rem;background:#ccc}.text hr{border:0;height:.2rem;background:#004966;margin-top:1.3rem}.text .admonition{position:relative}.text .admonition>*{padding-left:2rem}.text .admonition>:first-child::before{display:block;text-align:left;position:absolute;top:0;left:0;width:.75rem;font-size:1rem;line-height:1.5rem;height:1.5rem}.text .admonition--tip>:first-child::before{content:"â˜›";color:#fefefe;font-size:1.5rem;line-height:1.5rem;height:1.5rem}.text .admonition--warning>:first-child::before{content:"âš ï¸";color:#fefefe}.text .admonition--info>:first-child::before{content:"â“˜";color:#004966;font-weight:700}@media print{.text h1{margin-left:auto;margin-right:auto;margin-top:9rem;width:80%;font-variant:small-caps;text-align:center}.text--simple h1{margin-top:0}.text .meta{page-break-after:always;text-align:center;font-size:1.2rem;margin-top:1.5rem}.text .meta a{text-decoration:none}.text .meta time{display:none}.text .body p:first-of-type{margin-top:0}.text pre{padding:0;font-size:inherit;line-height:1.5rem;overflow:hidden;white-space:pre-wrap;word-break:break-all}}.text .podcasts{margin-top:1.5rem;text-align:center}.text a.podcast{display:block;height:3rem}.text a.podcast img{width:50%;max-width:200px}@media screen and (min-width:768px){.text .podcasts{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));grid-gap:1.5rem}.text a.podcast img{width:100%}}.text .tombstone{opacity:0}.event h1{font-size:2rem;line-height:2.5rem;margin-top:1.5rem;margin-bottom:1rem;font-weight:400}@media screen and (min-width:760px){.event h1{font-size:2.5rem;line-height:3rem;margin-top:1.5rem}}@media screen and (min-width:900px){.event h1{font-size:2.5rem;line-height:3rem;margin-top:3rem}}@media screen and (min-width:1400px){.event h1{font-size:3rem;line-height:3.5rem;margin-top:3rem}}.text .chroma{font-size:.8rem;border-radius:.2rem}.text .chroma .lntd{vertical-align:top;padding:0;margin:0;border:0}.text .chroma .lntable{border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block}.text .chroma .hl{display:block;width:100%}.text .chroma .lnt{margin-right:.4em;padding:0 .4em}.text .chroma{color:#272822}@media screen{.text .chroma{background-color:#fafafa}}.text .chroma .err{color:#960050}.text .chroma .hl{background-color:#ffc}.text .chroma .lnt{margin-right:.4em;padding:0 .4em;color:#7f7f7f}.text .chroma .ln{color:#7f7f7f}.text .chroma .k{color:#00a8c8}.text .chroma .kc{color:#00a8c8}.text .chroma .kd{color:#00a8c8}.text .chroma .kn{color:#f92672}.text .chroma .kp{color:#00a8c8}.text .chroma .kr{color:#00a8c8}.text .chroma .kt{color:#00a8c8}.text .chroma .n{color:#111}.text .chroma .na{color:#75af00}.text .chroma .nb{color:#111}.text .chroma .bp{color:#111}.text .chroma .nc{color:#75af00}.text .chroma .no{color:#00a8c8}.text .chroma .nd{color:#75af00}.text .chroma .ni{color:#111}.text .chroma .ne{color:#75af00}.text .chroma .nf{color:#75af00}.text .chroma .fm{color:#111}.text .chroma .nl{color:#111}.text .chroma .nn{color:#111}.text .chroma .nx{color:#75af00}.text .chroma .py{color:#111}.text .chroma .nt{color:#f92672}.text .chroma .nv{color:#111}.text .chroma .vc{color:#111}.text .chroma .vg{color:#111}.text .chroma .vi{color:#111}.text .chroma .vm{color:#111}.text .chroma .l{color:#ae81ff}.text .chroma .ld{color:#d88200}.text .chroma .s{color:#d88200}.text .chroma .sa{color:#d88200}.text .chroma .sb{color:#d88200}.text .chroma .sc{color:#d88200}.text .chroma .dl{color:#d88200}.text .chroma .sd{color:#d88200}.text .chroma .s2{color:#d88200}.text .chroma .se{color:#8045ff}.text .chroma .sh{color:#d88200}.text .chroma .si{color:#d88200}.text .chroma .sx{color:#d88200}.text .chroma .sr{color:#d88200}.text .chroma .s1{color:#d88200}.text .chroma .ss{color:#d88200}.text .chroma .m{color:#ae81ff}.text .chroma .mb{color:#ae81ff}.text .chroma .mf{color:#ae81ff}.text .chroma .mh{color:#ae81ff}.text .chroma .mi{color:#ae81ff}.text .chroma .il{color:#ae81ff}.text .chroma .mo{color:#ae81ff}.text .chroma .o{color:#f92672}.text .chroma .ow{color:#f92672}.text .chroma .p{color:#111}.text .chroma .c{color:#75715e}.text .chroma .ch{color:#75715e}.text .chroma .cm{color:#75715e}.text .chroma .c1{color:#75715e}.text .chroma .cs{color:#75715e}.text .chroma .cp{color:#75715e}.text .chroma .cpf{color:#75715e}.text .chroma .ge{font-style:italic}.text .chroma .gs{font-weight:700}.bios__bio{overflow-y:visible;margin-top:1.5rem;border-top:2px solid #fefefe;padding-top:1.5rem;margin-bottom:1.5rem;position:relative;display:flex;flex-direction:row-reverse}.bios__bio h2{line-height:3rem;margin-bottom:1.5rem;margin-top:0}.bios__bio img{margin-left:1.5rem;border-radius:50%;height:10.5rem;width:10.5rem}.bios__content{flex:1}@media screen and (max-width:768px){.bios__bio{display:block;position:relative;text-align:center}.bios__content{flex:none;text-align:left}.bios h2{text-align:center}.bios h2 span{display:block}}</style><script async src="https://www.googletagmanager.com/gtag/js?id=UA-343802-37"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-343802-37')</script><meta name=color-scheme content="dark light"><link rel=stylesheet type=text/css href=https://cdn-prod.securiti.ai/consent/cookie-consent.css></head><body><script>(function(){var a=document.createElement('script'),b;a.src='https://cdn-prod.securiti.ai/consent/cookie-consent-sdk.js',a.setAttribute('data-tenant-uuid','2ea5dc1c-c928-410b-a379-78d825d2eb0c'),a.setAttribute('data-domain-uuid','2f40096a-75c8-4af2-aec3-42db0231a457'),a.setAttribute('data-backend-url','https://app.securiti.ai'),a.defer=!0,b=document.head||document.body,b.appendChild(a),a.addEventListener('load',function(){window.initCmp()})})()</script><header><div class=page-header><div class=logo><a href=/><img src="data:image/svg+xml,%3Csvg baseProfile=%22tiny%22 id=%22Capa_1%22 xmlns=%22http://www.w3.org/2000/svg%22 xmlns:xlink=%22http://www.w3.org/1999/xlink%22 viewBox=%220 0 650 210%22%3E%3Cg%3E%3Cg%3E%3Ccircle fill=%22%23fff%22 cx=%22100.91%22 cy=%22104.98%22 r=%2268.91%22/%3E%3Cg%3E%3Cpath fill=%22%23bf181a%22 d=%22M100.91 36.12C62.85 36.12 32 66.97 32 105.03c0 23.47 11.74 44.18 29.66 56.63v-56.63c0-21.68 17.57-39.25 39.25-39.25s39.25 17.57 39.25 39.25-17.57 39.25-39.25 39.25c-8.76.0-16.82-2.91-23.35-7.76v33.35c7.29 2.63 15.15 4.07 23.35 4.07 38.06.0 68.91-30.85 68.91-68.91s-30.86-68.91-68.91-68.91z%22/%3E%3Ccircle fill=%22%23efc700%22 cx=%22100.91%22 cy=%22105.03%22 r=%2222.96%22/%3E%3Cpath fill=%22%23e6b600%22 d=%22M100.91 84.32c12.3.0 22.31 9.68 22.9 21.83.02-.38.06-.75.06-1.13.0-12.68-10.28-22.96-22.96-22.96s-22.96 10.28-22.96 22.96c0 .38.04.75.06 1.13C78.6 94 88.61 84.32 100.91 84.32z%22/%3E%3C/g%3E%3C/g%3E%3Cpath fill=%22%233c3c3c%22 d=%22M213.3 128.11V81.98h19.29c10.51.0 17.3 6.16 17.3 15.7.0 9.39-7.11 15.95-17.3 15.95h-9.02v14.47H213.3zm18.71-23.13c4.84.0 7.61-2.66 7.61-7.29.0-4.54-2.7-7.04-7.61-7.04h-8.45v14.33H232.01z%22/%3E%3Cpolygon fill=%22%233c3c3c%22 points=%22272.12,128.11 272.12,81.98 304.8,81.98 304.8,90.71 282.39,90.71 282.39,100.36 302.88,100.36 302.88,109.15 282.39,109.15 282.39,119.38 304.87,119.38 304.87,128.11%22/%3E%3Cpath fill=%22%233c3c3c%22 d=%22M354.71 128.11l-8.2-14.35h-8.39v14.35h-10.26V81.98h20.89c10.24.0 16.85 6.24 16.85 15.89.0 6.29-3.19 11.52-8.56 14.12l9.56 16.11H354.71zM347.66 105.23c4.81.0 7.68-2.77 7.68-7.42.0-4.59-2.8-7.23-7.68-7.23h-9.53v14.65H347.66z%22/%3E%3Cpath fill=%22%233c3c3c%22 d=%22M470.47 129.01c-12.53.0-20.63-8.12-20.63-20.69v-6.53c0-12.57 8.1-20.69 20.63-20.69 12.72.0 20.63 7.93 20.63 20.69v6.53C491.1 121.08 483.19 129.01 470.47 129.01zm0-39.2c-6.59.0-10.37 4.2-10.37 11.52v7.43c0 7.32 3.78 11.52 10.37 11.52 6.59.0 10.36-4.2 10.36-11.52v-7.43C480.83 94.01 477.06 89.81 470.47 89.81z%22/%3E%3Cpolygon fill=%22%233c3c3c%22 points=%22543.01,128.11 524.48,99.79 524.48,128.11 514.41,128.11 514.41,81.98 523.93,81.98 542.46,110.3 542.46,81.98 552.53,81.98 552.53,128.11%22/%3E%3Cpath fill=%22%233c3c3c%22 d=%22M607.7 128.11l-3.01-9.41h-16.47l-3.01 9.41h-10.29l16.54-46.13h10.01L618 128.11H607.7zM601.98 110.29l-5.52-17.45-5.58 17.45h11.1z%22/%3E%3Cg%3E%3Cpath fill=%22%233c3c3c%22 d=%22M418.62 111.85c-.77 5.33-4.37 8.5-9.73 8.5-8.74.0-10.05-7.3-10.05-11.65v-7.3c0-4.35 1.31-11.65 10.05-11.65 5.35.0 8.95 3.15 9.73 8.45l9.52-1.42c-1.28-9.33-8.95-15.7-19.24-15.7-12.68.0-20.24 7.76-20.24 20.76v6.4c0 13 7.57 20.76 20.24 20.76 10.3.0 17.98-6.39 19.25-15.74L418.62 111.85z%22/%3E%3C/g%3E%3C/g%3E%3C/svg%3E" alt=Percona></a></div><input type=checkbox id=show-mobile-menu value=1 aria-hidden=true><div class=mobile-toggle aria-controls=mobile-menu aria-label="Open navigation" role=button><label for=show-mobile-menu id=hamburger><span class=hamburger-bar></span><span class=hamburger-bar></span><span class=hamburger-bar></span></label></div><div class=mobile-menu id=mobile-menu aria-labelledby=navigation-header role=dialog aria-modal=false aria-hidden=true><nav><ul class=menu__list><li><a href=/mongodb><span>MongoDB</span></a></li><li><a href=/mysql><span>MySQL</span></a></li><li><a href=/postgresql><span>PostgreSQL</span></a></li><li><a href=/projects><span>Projects</span></a><ul class="submenu__list sub-menu"><li><a href=/projects/operators/><span>Kubernetes Operators</span></a></li><li><a href=/projects/pmm/><span>Percona Monitoring and Management</span></a></li><li><a href=/projects/toolkit/><span>Percona Toolkit</span></a></li><li><a href=/projects><span>All projects</span></a></li></ul></li><li><a href=/podcasts><span>Podcasts</span></a><ul class="submenu__list sub-menu"><li><a href=/podcasts/><span>HOSS Talks</span></a></li><li><a href=/events/dave-stokes-talks-open-percona-live-2022/><span>Dave Stokes</span></a></li></ul></li><li><a href=/events><span>Events</span></a><ul class="submenu__list sub-menu"><li><a href=/events><span>Community Events</span></a></li><li><a href=/contribute/engineeringmeetings><span>Engineering Meetings</span></a></li><li><a href=/speakers><span>Speakers</span></a></li></ul></li><li><a href=/blog><span>Blog</span></a><ul class="submenu__list sub-menu"><li><a href=/blog><span>Posts</span></a></li><li><a href=/authors><span>Authors</span></a></li></ul></li><li><a href=/contribute><span>Contribute</span></a><ul class="submenu__list sub-menu"><li><a href=/contribute/articles><span>Articles</span></a></li><li><a href=/contribute/opentopics><span>Open Topics</span></a></li><li><a href=/contribute/youtube_playlists><span>YouTube Playlists</span></a></li><li><a href=/contribute/testimonials><span>Testimonials & Surveys</span></a></li><li><a href=/contribute/coc><span>Code of Conduct</span></a></li><li><a href=/contribute/documentation><span>Documentation</span></a></li><li><a href=/contribute/help-wanted><span>Help Wanted</span></a></li><li><a href=/contribute/videos><span>Videos</span></a></li><li><a href=/contribute/dev><span>Repositories and Artifacts</span></a></li></ul></li></ul></nav></div></div></header><main class=page><div class=page-main><article class=text itemscope itemtype=https://schema.org/BlogPosting><meta itemprop=image content="https://percona.community/blog/2022/10/mysql-tracing-a-single-query.jpg"><meta itemprop=mainEntityOfPage content="https://percona.community/blog/2022/10/18/mysql-tracing-a-single-query-with-performance_schema/"><meta itemprop=keywords content="author_kohntopp, mysql"><h1 itemprop="name headline">MySQL: Tracing a single query with PERFORMANCE_SCHEMA</h1><div class=meta><time datetime="2022-10-18 00:00:00 +0000 UTC" itemprop=datePublished><span class=line>October 18, 2022</span>
<span class=calendar><span class=day>18</span>
<span class=month-year>Oct 2022</span></span></time>
<span class=authors>by <a href=/authors/koehntopp/>Kristian KÃ¶hntopp</a></span></div><div itemprop=articleBody class=body><p>My task is to collect performance data about a single query, using <code>PERFORMANCE_SCHEMA</code> (P_S for short) in MySQL, to ship it elsewhere for integration with other data.</p><p>In a grander scheme of things, I will need to define what performance data from a query I am actually interested in.
I will also need to find a way to attribute the query (as seen on the server) to a point in the codebase of the client, which is not always easy when an ORM or other SQL generator is being used.
And finally I will need to find a way to view the query execution in the context of the client code execution, because the data access is only a part of the system performance.</p><p>But this is about query execution in the server, and the instrumentation available to me in MySQL 8, at least to get things started.
So we take the tour of performance schema, and then run one example query (a simple join) and see what we can find out about this query.</p><p><em>First published on <a href=https://blog.koehntopp.info/2021/09/15/mysql-tracing-a-single-query-with-performanceschema.html target=_blank rel="noopener noreferrer">https://blog.koehntopp.info/</a> and syndicated here with permission of the <a href=/authors/koehntopp/>author</a>.</em></p><h1 id=performance-schema-the-10000-m-view>Performance Schema, the 10.000 m view</h1><p><a href=https://dev.mysql.com/doc/refman/8.0/en/performance-schema.html target=_blank rel="noopener noreferrer">The Manual</a> has a major chapter that covers P_S in details.
The original idea of P_S is to have a bunch of preallocated memory areas without locks, presented to the database itself as tables.</p><p>P_S is unusual in the way that P_S &ldquo;tables&rdquo; are never locked while you work with them.
That means the values in a &ldquo;table&rdquo; can change while you read them.
That is important - if you for example calculate percentages, they may not add up to 100%.
If you <code>ORDER BY</code>, the sort may or may not be stable.</p><p>These are good properties: P_S will not freeze the server, and you won&rsquo;t kill the server by working with P_S tables.</p><p>It is a good idea to make a copy of P_S tables while you work with them, by turning off subquery merging with <code>select /*+ NO_MERGE(t) */ </code>, and then materializing P_S tables in subqueries.</p><p>Originally, P_S also had no secondary indexes, so joining P_S tables against other P_S tables did not work efficiently.
That was probably a good idea, because joining against a table that is changing while you execute the join is probably generating random results anyway.
But because it is so common, and because MySQL itself does this now internally in <code>sys.*</code>, secondary indexes to join efficiently now exist.
That does not make the joins more correct, but at least you get the result faster.</p><p>I wrote about all this <a href=https://blog.koehntopp.info/2020/12/01/not-joining-on-performance-schema.html target=_blank rel="noopener noreferrer">in an earlier article</a>.</p><h2 id=instruments-objects-actors-threads-and-consumers>Instruments, Objects, Actors, Threads and Consumers</h2><p>The data P_S collects is centered around three major things:</p><ul><li>Time consumed. In database servers, that is mostly wait time - waiting on I/O or locks.</li><li>Data transferred. In database servers, that is mostly pages read or written. In a way, this related to I/O wait.</li><li>Memory used. In database servers, that is buffers allocated - how large, and how often, and peak usage.</li></ul><p>P_S collects this in the form of &ldquo;events&rdquo; (and takes care to note that P_S events are not binlog events or other any events).
The collection points are in the database server code, which is instrumented, so the collectors are <em>instruments</em>.</p><p>The thing that the server code works on may be of a certain kind, for example a table or another <em>object</em> in the server, but have a variable identity (that would be different tables, with different names).
Instruments can be filtered by using object names.</p><p>The activity done in the server is done on behalf of a database user, in the form of <em>user@host</em> or, new in MySQL 8, using roles.
The entity on which behalf the server is working on is called the <em>actor</em>.</p><p>The activity done in the server is also done in the context of a <em>thread</em>, some of which are background threads, while the majority in a busy server are usually connection threads.</p><p>And finally, the data collected is put into the in-memory tables of P_S.
These come in various groups, and are called <em>consumers</em>.</p><p><img src=https://blog.koehntopp.info/uploads/2021/09/performance_schema_filtering.png></p><p><em>Data is collected from objects using instruments. Instruments can be turned on and off. Their collected data is then filtered by Objects, Actors and Threads, and finally dropped into consumers. Many consumers are aggregates, some collect information specific to one query execution.</em></p><p>For each of these things there is a <code>setup_...</code> table that controls how event data is collected by the instrumentation, filtered and the consumed in result tables.
In parallel, object identities are collected in <code>..._instances</code> tables, which are needed to resolve object identities.</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>show</span> <span class=n>tables</span> <span class=k>like</span> <span class=s2>&#34;setup_%&#34;</span><span class=p>;</span>
<span class=o>+</span><span class=c1>----------------------------------------+
</span><span class=c1></span><span class=o>|</span> <span class=n>Tables_in_performance_schema</span> <span class=p>(</span><span class=n>setup_</span><span class=o>%</span><span class=p>)</span> <span class=o>|</span>
<span class=o>+</span><span class=c1>----------------------------------------+
</span><span class=c1></span><span class=o>|</span> <span class=n>setup_actors</span>                           <span class=o>|</span>
<span class=o>|</span> <span class=n>setup_consumers</span>                        <span class=o>|</span>
<span class=o>|</span> <span class=n>setup_instruments</span>                      <span class=o>|</span>
<span class=o>|</span> <span class=n>setup_objects</span>                          <span class=o>|</span>
<span class=o>|</span> <span class=n>setup_threads</span>                          <span class=o>|</span>
<span class=o>+</span><span class=c1>----------------------------------------+
</span><span class=c1></span><span class=mi>5</span> <span class=k>rows</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>

<span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>show</span> <span class=n>tables</span> <span class=k>like</span> <span class=s2>&#34;%_instances&#34;</span><span class=p>;</span>
<span class=o>+</span><span class=c1>--------------------------------------------+
</span><span class=c1></span><span class=o>|</span> <span class=n>Tables_in_performance_schema</span> <span class=p>(</span><span class=o>%</span><span class=n>_instances</span><span class=p>)</span> <span class=o>|</span>
<span class=o>+</span><span class=c1>--------------------------------------------+
</span><span class=c1></span><span class=o>|</span> <span class=n>cond_instances</span>                             <span class=o>|</span>
<span class=o>|</span> <span class=n>file_instances</span>                             <span class=o>|</span>
<span class=o>|</span> <span class=n>mutex_instances</span>                            <span class=o>|</span>
<span class=o>|</span> <span class=n>prepared_statements_instances</span>              <span class=o>|</span>
<span class=o>|</span> <span class=n>rwlock_instances</span>                           <span class=o>|</span>
<span class=o>|</span> <span class=n>socket_instances</span>                           <span class=o>|</span>
<span class=o>+</span><span class=c1>--------------------------------------------+
</span><span class=c1></span><span class=mi>6</span> <span class=k>rows</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>

<span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>select</span> <span class=o>*</span> <span class=k>from</span> <span class=n>socket_instances</span><span class=p>;</span>
<span class=o>+</span><span class=c1>----------------------------------------+-----------------------+-----------+-----------+-----------+-------+--------+
</span><span class=c1></span><span class=o>|</span> <span class=n>EVENT_NAME</span>                             <span class=o>|</span> <span class=n>OBJECT_INSTANCE_BEGIN</span> <span class=o>|</span> <span class=n>THREAD_ID</span> <span class=o>|</span> <span class=n>SOCKET_ID</span> <span class=o>|</span> <span class=n>IP</span>        <span class=o>|</span> <span class=n>PORT</span>  <span class=o>|</span> <span class=k>STATE</span>  <span class=o>|</span>
<span class=o>+</span><span class=c1>----------------------------------------+-----------------------+-----------+-----------+-----------+-------+--------+
</span><span class=c1></span><span class=o>|</span> <span class=n>wait</span><span class=o>/</span><span class=n>io</span><span class=o>/</span><span class=n>socket</span><span class=o>/</span><span class=n>mysqlx</span><span class=o>/</span><span class=n>tcpip_socket</span>     <span class=o>|</span>             <span class=mi>106328376</span> <span class=o>|</span>        <span class=mi>44</span> <span class=o>|</span>        <span class=mi>21</span> <span class=o>|</span> <span class=p>::</span>        <span class=o>|</span> <span class=mi>18025</span> <span class=o>|</span> <span class=n>ACTIVE</span> <span class=o>|</span>
<span class=o>|</span> <span class=n>wait</span><span class=o>/</span><span class=n>io</span><span class=o>/</span><span class=n>socket</span><span class=o>/</span><span class=n>mysqlx</span><span class=o>/</span><span class=n>unix_socket</span>      <span class=o>|</span>             <span class=mi>106328688</span> <span class=o>|</span>        <span class=mi>44</span> <span class=o>|</span>        <span class=mi>22</span> <span class=o>|</span>           <span class=o>|</span>     <span class=mi>0</span> <span class=o>|</span> <span class=n>ACTIVE</span> <span class=o>|</span>
<span class=o>|</span> <span class=n>wait</span><span class=o>/</span><span class=n>io</span><span class=o>/</span><span class=n>socket</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>server_tcpip_socket</span> <span class=o>|</span>             <span class=mi>106329000</span> <span class=o>|</span>         <span class=mi>1</span> <span class=o>|</span>        <span class=mi>26</span> <span class=o>|</span> <span class=mi>127</span><span class=p>.</span><span class=mi>0</span><span class=p>.</span><span class=mi>0</span><span class=p>.</span><span class=mi>1</span> <span class=o>|</span>  <span class=mi>8025</span> <span class=o>|</span> <span class=n>ACTIVE</span> <span class=o>|</span>
<span class=o>|</span> <span class=n>wait</span><span class=o>/</span><span class=n>io</span><span class=o>/</span><span class=n>socket</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>server_unix_socket</span>  <span class=o>|</span>             <span class=mi>106329312</span> <span class=o>|</span>         <span class=mi>1</span> <span class=o>|</span>        <span class=mi>28</span> <span class=o>|</span>           <span class=o>|</span>     <span class=mi>0</span> <span class=o>|</span> <span class=n>ACTIVE</span> <span class=o>|</span>
<span class=o>|</span> <span class=n>wait</span><span class=o>/</span><span class=n>io</span><span class=o>/</span><span class=n>socket</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>client_connection</span>   <span class=o>|</span>             <span class=mi>106330560</span> <span class=o>|</span>        <span class=mi>50</span> <span class=o>|</span>        <span class=mi>41</span> <span class=o>|</span>           <span class=o>|</span>     <span class=mi>0</span> <span class=o>|</span> <span class=n>ACTIVE</span> <span class=o>|</span>
<span class=o>+</span><span class=c1>----------------------------------------+-----------------------+-----------+-----------+-----------+-------+--------+
</span><span class=c1></span><span class=mi>5</span> <span class=k>rows</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>
</code></pre></div><h2 id=current-history-and-history-long-tables-vs-summaries>Current, History and History Long Tables vs. Summaries</h2><p>P_S collects data in a lot of summary table, which should not interest us that much here.
Our task is to look at the performance data of a single, individual query to better understand what happened when it ran.</p><p>These unaggregated tables are <code>events_transactions</code>, <code>events_statements</code>, <code>events_stages</code> and <code>events_waits</code>.
For each of them, we have <code>_current</code>, <code>_history</code> or <code>_history_long</code> tables.</p><p>The <code>_current</code> tables contain one entry for the currently running thread.
The <code>_history</code> tables contain a configurable number of entries for each thread, for example 10 per thread.
And the <code>_history_long</code> tables contain a configurable number of entries, shared across all threads, for example 10.000 in total.
As the server continues to execute statements and produce events, old entries are discarded and new entries are added, automatically.
Additionally, each query execution is aggregated along several dimensions in summary tables.
Summary tables state these dimension(s) using <code>by_&lt;dimensionname></code>, for example <code>_by_user_by_eventname</code> or similar.</p><p>In current MySQL, P_S is enabled by default.
But not all instruments and consumers are enabled, because some instrumentation slows query execution down, and some consumers can use a lot of memory.
To be fast and safe, all memory is statically allocated at config change so the memory resource usage of P_S is constant and no allocations are made during execution.</p><p>We can enable all instrumentation completely with this SQL:</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>UPDATE</span> 
 <span class=o>-&gt;</span> <span class=n>performance_schema</span><span class=p>.</span><span class=n>setup_instruments</span> <span class=k>SET</span> <span class=n>ENABLED</span> <span class=o>=</span> <span class=s1>&#39;YES&#39;</span><span class=p>,</span> <span class=n>TIMED</span> <span class=o>=</span> <span class=s1>&#39;YES&#39;</span><span class=p>;</span>
<span class=n>Query</span> <span class=n>OK</span><span class=p>,</span> <span class=mi>494</span> <span class=k>rows</span> <span class=n>affected</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>
<span class=k>Rows</span> <span class=n>matched</span><span class=p>:</span> <span class=mi>1216</span>  <span class=n>Changed</span><span class=p>:</span> <span class=mi>494</span>  <span class=n>Warnings</span><span class=p>:</span> <span class=mi>0</span>

<span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>UPDATE</span> 
 <span class=o>-&gt;</span> <span class=n>performance_schema</span><span class=p>.</span><span class=n>setup_consumers</span> <span class=k>SET</span> <span class=n>ENABLED</span> <span class=o>=</span> <span class=s1>&#39;YES&#39;</span><span class=p>;</span>
<span class=n>Query</span> <span class=n>OK</span><span class=p>,</span> <span class=mi>0</span> <span class=k>rows</span> <span class=n>affected</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>
<span class=k>Rows</span> <span class=n>matched</span><span class=p>:</span> <span class=mi>15</span>  <span class=n>Changed</span><span class=p>:</span> <span class=mi>0</span>  <span class=n>Warnings</span><span class=p>:</span> <span class=mi>0</span>
</code></pre></div><p>When we look at one of these tables, for example <code>events_statements_current</code>, we see a structure like this:</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>show</span> <span class=k>create</span> <span class=k>table</span> <span class=n>events_statements_current</span><span class=err>\</span><span class=k>G</span>
<span class=o>***************************</span> <span class=mi>1</span><span class=p>.</span> <span class=k>row</span> <span class=o>***************************</span>
       <span class=k>Table</span><span class=p>:</span> <span class=n>events_statements_current</span>
<span class=k>Create</span> <span class=k>Table</span><span class=p>:</span> <span class=k>CREATE</span> <span class=k>TABLE</span> <span class=o>`</span><span class=n>events_statements_current</span><span class=o>`</span> <span class=p>(</span>
  <span class=o>`</span><span class=n>THREAD_ID</span><span class=o>`</span> <span class=nb>bigint</span> <span class=n>unsigned</span> <span class=k>NOT</span> <span class=k>NULL</span><span class=p>,</span>
  <span class=o>`</span><span class=n>EVENT_ID</span><span class=o>`</span> <span class=nb>bigint</span> <span class=n>unsigned</span> <span class=k>NOT</span> <span class=k>NULL</span><span class=p>,</span>
  <span class=o>`</span><span class=n>END_EVENT_ID</span><span class=o>`</span> <span class=nb>bigint</span> <span class=n>unsigned</span> <span class=k>DEFAULT</span> <span class=k>NULL</span><span class=p>,</span>
  <span class=o>`</span><span class=n>EVENT_NAME</span><span class=o>`</span> <span class=nb>varchar</span><span class=p>(</span><span class=mi>128</span><span class=p>)</span> <span class=k>NOT</span> <span class=k>NULL</span><span class=p>,</span>
  <span class=o>`</span><span class=k>SOURCE</span><span class=o>`</span> <span class=nb>varchar</span><span class=p>(</span><span class=mi>64</span><span class=p>)</span> <span class=k>DEFAULT</span> <span class=k>NULL</span><span class=p>,</span>
  <span class=o>`</span><span class=n>TIMER_START</span><span class=o>`</span> <span class=nb>bigint</span> <span class=n>unsigned</span> <span class=k>DEFAULT</span> <span class=k>NULL</span><span class=p>,</span>
  <span class=o>`</span><span class=n>TIMER_END</span><span class=o>`</span> <span class=nb>bigint</span> <span class=n>unsigned</span> <span class=k>DEFAULT</span> <span class=k>NULL</span><span class=p>,</span>
  <span class=o>`</span><span class=n>TIMER_WAIT</span><span class=o>`</span> <span class=nb>bigint</span> <span class=n>unsigned</span> <span class=k>DEFAULT</span> <span class=k>NULL</span><span class=p>,</span>
<span class=p>...</span>
  <span class=o>`</span><span class=n>NESTING_EVENT_ID</span><span class=o>`</span> <span class=nb>bigint</span> <span class=n>unsigned</span> <span class=k>DEFAULT</span> <span class=k>NULL</span><span class=p>,</span>
  <span class=o>`</span><span class=n>NESTING_EVENT_TYPE</span><span class=o>`</span> <span class=n>enum</span><span class=p>(</span><span class=s1>&#39;TRANSACTION&#39;</span><span class=p>,</span><span class=s1>&#39;STATEMENT&#39;</span><span class=p>,</span><span class=s1>&#39;STAGE&#39;</span><span class=p>,</span><span class=s1>&#39;WAIT&#39;</span><span class=p>)</span> <span class=k>DEFAULT</span> <span class=k>NULL</span><span class=p>,</span>
  <span class=o>`</span><span class=n>NESTING_EVENT_LEVEL</span><span class=o>`</span> <span class=nb>int</span> <span class=k>DEFAULT</span> <span class=k>NULL</span><span class=p>,</span>
  <span class=o>`</span><span class=n>STATEMENT_ID</span><span class=o>`</span> <span class=nb>bigint</span> <span class=n>unsigned</span> <span class=k>DEFAULT</span> <span class=k>NULL</span><span class=p>,</span>
  <span class=k>PRIMARY</span> <span class=k>KEY</span> <span class=p>(</span><span class=o>`</span><span class=n>THREAD_ID</span><span class=o>`</span><span class=p>,</span><span class=o>`</span><span class=n>EVENT_ID</span><span class=o>`</span><span class=p>)</span>
<span class=p>)</span> <span class=n>ENGINE</span><span class=o>=</span><span class=n>PERFORMANCE_SCHEMA</span> <span class=k>DEFAULT</span> <span class=n>CHARSET</span><span class=o>=</span><span class=n>utf8mb4</span> <span class=k>COLLATE</span><span class=o>=</span><span class=n>utf8mb4_0900_ai_ci</span>
<span class=mi>1</span> <span class=k>row</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>
</code></pre></div><p>That is, events are tagged with a <code>THREAD_ID</code> (which is not a CONNECTION_ID() as seen in processlist), an <code>EVENT_ID/END_EVENT_ID</code> bracket, various source and timer values and for further dissection, a <code>NESTING_EVENT_ID</code> and <code>_TYPE</code>.</p><p>We can translate processlist ids into thread ids using the <code>P_S.THREADS</code> table, and then use this to limit our view on the <code>events_statements_current</code> table:</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>select</span> <span class=n>thread_id</span> <span class=k>from</span> <span class=n>threads</span> 
 <span class=o>-&gt;</span> <span class=k>where</span> <span class=n>processlist_id</span> <span class=o>=</span> <span class=n>connection_id</span><span class=p>();</span>
<span class=o>+</span><span class=c1>-----------+
</span><span class=c1></span><span class=o>|</span> <span class=n>thread_id</span> <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+
</span><span class=c1></span><span class=o>|</span>        <span class=mi>50</span> <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+
</span><span class=c1></span><span class=mi>1</span> <span class=k>row</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>

<span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>select</span> 
 <span class=o>-&gt;</span> <span class=n>thread_id</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>event_id</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>event_name</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=k>source</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>sys</span><span class=p>.</span><span class=n>format_time</span><span class=p>(</span><span class=n>timer_wait</span><span class=p>),</span> 
 <span class=o>-&gt;</span> <span class=n>sql_text</span> 
 <span class=o>-&gt;</span> <span class=k>from</span> <span class=n>events_statements_current</span> 
 <span class=o>-&gt;</span> <span class=k>where</span> <span class=n>thread_id</span> <span class=o>=</span> <span class=mi>50</span><span class=err>\</span><span class=k>G</span>
<span class=o>***************************</span> <span class=mi>1</span><span class=p>.</span> <span class=k>row</span> <span class=o>***************************</span>
                  <span class=n>thread_id</span><span class=p>:</span> <span class=mi>50</span>
                   <span class=n>event_id</span><span class=p>:</span> <span class=mi>88463</span>
                 <span class=n>event_name</span><span class=p>:</span> <span class=k>statement</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=k>select</span>
                     <span class=k>source</span><span class=p>:</span> <span class=n>init_net_server_extension</span><span class=p>.</span><span class=n>cc</span><span class=p>:</span><span class=mi>94</span>
<span class=n>sys</span><span class=p>.</span><span class=n>format_time</span><span class=p>(</span><span class=n>timer_wait</span><span class=p>):</span> <span class=mi>341</span><span class=p>.</span><span class=mi>04</span> <span class=n>us</span>
                   <span class=n>sql_text</span><span class=p>:</span> <span class=k>select</span> <span class=n>thread_id</span><span class=p>,</span> <span class=n>event_id</span><span class=p>,</span> <span class=n>event_name</span><span class=p>,</span> <span class=k>source</span><span class=p>,</span> <span class=n>sys</span><span class=p>.</span><span class=n>format_time</span><span class=p>(</span><span class=n>timer_wait</span><span class=p>),</span> <span class=n>sql_text</span> <span class=k>from</span> <span class=n>events_statements_current</span> <span class=k>where</span> <span class=n>thread_id</span> <span class=o>=</span> <span class=mi>50</span>
<span class=mi>1</span> <span class=k>row</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>
</code></pre></div><p>So running this query took 341 Microseconds, or 0.341 ms.
And sources are named after their location in the server sourcecode, <a href=https://github.com/mysql/mysql-server/blob/8.0/sql/conn_handler/init_net_server_extension.cc#L94-L96 target=_blank rel="noopener noreferrer">filename and line number</a>.</p><p>Events exist in a hierarchy: wait events nest within stage events, which nest within statement events, which nest within transaction events.
Some nested events refer to their own type, for example, statement events can point to other statement events they are nested in.
Other events refer to their enclosing context in the hierarchy.
Nesting Event ID, Type and Level make this clear.</p><h2 id=instrument-names>Instrument names</h2><p>The manual explains <a href=https://dev.mysql.com/doc/refman/8.0/en/performance-schema-instrument-naming.html target=_blank rel="noopener noreferrer">Instrument Names</a>.</p><p>They have path-like names that group instruments hierarchically, for example <code>wait/io/file/innodb/innodb_data_file</code>.
This is a <code>wait</code> event, <code>io</code> related, specifically <code>file</code> I/O, more specific <code>innodb</code> and even more specific <code>innodb_data_file</code>.
Looking at other fields in the <code>events_waits_history</code> table, we would see the file name as part of the <code>OBJECT_SCHEMA.OBJECT_NAME</code> designator for this event.
That means, we can see how long we waited for I/O coming from this specific file or going to the file.</p><p>Further up in the nesting we would see, at the statement level, the actual <code>SQL_TEXT</code>, and also the number of rows scanned.
That means we can get a rough estimate why this particular statement instance was slow - for example, the plan was good, the number of rows was low, but we see a lot of actual file IO waits, so probably the buffer pool was cold.</p><p>The manual page above discusses the instrument names at length, and it is important to get an overview of what exists and what is measured.
Specifically, for statement level entries the instruments vary during query execution and become more detailed, as they reflect the progress in understanding of the server about the nature of the statement as it is executed.</p><h1 id=an-example-run>An example run</h1><p>In a freshly restarted idle server, we log in to a shell and <code>use world</code> for the world sample database.
This is a tiny database, but because the server has been just restarted, nothing of it is cached.
We run a simple query:</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>world</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>select</span> 
 <span class=o>-&gt;</span> <span class=n>co</span><span class=p>.</span><span class=n>continent</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>co</span><span class=p>.</span><span class=n>name</span> <span class=k>as</span> <span class=n>country</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>co</span><span class=p>.</span><span class=n>population</span> <span class=k>as</span> <span class=n>copop</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>ci</span><span class=p>.</span><span class=n>name</span> <span class=k>as</span> <span class=n>capital</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>ci</span><span class=p>.</span><span class=n>population</span> <span class=k>as</span> <span class=n>cipop</span> 
 <span class=o>-&gt;</span> <span class=k>from</span> <span class=n>country</span> <span class=k>as</span> <span class=n>co</span> <span class=k>join</span> <span class=n>city</span> <span class=k>as</span> <span class=n>ci</span>
  <span class=o>-&gt;</span>   <span class=k>on</span> <span class=n>co</span><span class=p>.</span><span class=n>capital</span> <span class=o>=</span> <span class=n>ci</span><span class=p>.</span><span class=n>id</span> 
  <span class=o>-&gt;</span> <span class=k>where</span> <span class=n>continent</span> <span class=o>=</span> <span class=s1>&#39;Europe&#39;</span><span class=p>;</span>
<span class=o>+</span><span class=c1>-----------+-------------------------------+-----------+------------------------------------+---------+
</span><span class=c1></span><span class=o>|</span> <span class=n>continent</span> <span class=o>|</span> <span class=n>country</span>                       <span class=o>|</span> <span class=n>copop</span>     <span class=o>|</span> <span class=n>capital</span>                            <span class=o>|</span> <span class=n>cipop</span>   <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+-------------------------------+-----------+------------------------------------+---------+
</span><span class=c1></span><span class=o>|</span> <span class=n>Europe</span>    <span class=o>|</span> <span class=n>Albania</span>                       <span class=o>|</span>   <span class=mi>3401200</span> <span class=o>|</span> <span class=n>Tirana</span>                             <span class=o>|</span>  <span class=mi>270000</span> <span class=o>|</span>
<span class=p>...</span>
<span class=o>|</span> <span class=n>Europe</span>    <span class=o>|</span> <span class=n>Yugoslavia</span>                    <span class=o>|</span>  <span class=mi>10640000</span> <span class=o>|</span> <span class=n>Beograd</span>                            <span class=o>|</span> <span class=mi>1204000</span> <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+-------------------------------+-----------+------------------------------------+---------+
</span><span class=c1></span><span class=mi>46</span> <span class=k>rows</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>
</code></pre></div><p>Now let&rsquo;s check what we can find out, using a second session:</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>select</span> <span class=o>*</span> <span class=k>from</span> <span class=n>threads</span> 
 <span class=o>-&gt;</span> <span class=k>where</span> <span class=n>processlist_db</span> <span class=o>=</span> <span class=s1>&#39;world&#39;</span><span class=err>\</span><span class=k>G</span>
<span class=o>***************************</span> <span class=mi>1</span><span class=p>.</span> <span class=k>row</span> <span class=o>***************************</span>
          <span class=n>THREAD_ID</span><span class=p>:</span> <span class=mi>48</span>
               <span class=n>NAME</span><span class=p>:</span> <span class=n>thread</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>one_connection</span>
               <span class=k>TYPE</span><span class=p>:</span> <span class=n>FOREGROUND</span>
     <span class=n>PROCESSLIST_ID</span><span class=p>:</span> <span class=mi>9</span>
   <span class=n>PROCESSLIST_USER</span><span class=p>:</span> <span class=n>msandbox</span>
   <span class=n>PROCESSLIST_HOST</span><span class=p>:</span> <span class=n>localhost</span>
     <span class=n>PROCESSLIST_DB</span><span class=p>:</span> <span class=n>world</span>
<span class=n>PROCESSLIST_COMMAND</span><span class=p>:</span> <span class=n>Sleep</span>
   <span class=n>PROCESSLIST_TIME</span><span class=p>:</span> <span class=mi>4</span>
  <span class=n>PROCESSLIST_STATE</span><span class=p>:</span> <span class=k>NULL</span>
   <span class=n>PROCESSLIST_INFO</span><span class=p>:</span> <span class=k>NULL</span>
   <span class=n>PARENT_THREAD_ID</span><span class=p>:</span> <span class=mi>1</span>
               <span class=k>ROLE</span><span class=p>:</span> <span class=k>NULL</span>
       <span class=n>INSTRUMENTED</span><span class=p>:</span> <span class=n>YES</span>
            <span class=n>HISTORY</span><span class=p>:</span> <span class=n>YES</span>
    <span class=n>CONNECTION_TYPE</span><span class=p>:</span> <span class=n>Socket</span>
       <span class=n>THREAD_OS_ID</span><span class=p>:</span> <span class=mi>346752</span>
     <span class=n>RESOURCE_GROUP</span><span class=p>:</span> <span class=n>USR_default</span>
<span class=mi>1</span> <span class=k>row</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>
</code></pre></div><p>In our case we are only interested in the fact that our <code>thread/sql/one_connection</code> in the processlist is shown as connection <code>9</code>, but internally has a thread_id of <code>48</code>.
The Linux Operating System PID is <code>346752</code>.</p><p>We can use this to check <code>events_transactions_wait</code>, and find</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>select</span> 
 <span class=o>-&gt;</span> <span class=n>thread_id</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>event_id</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=k>state</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=k>source</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>sys</span><span class=p>.</span><span class=n>format_time</span><span class=p>(</span><span class=n>timer_wait</span><span class=p>)</span> <span class=k>as</span> <span class=n>timer</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>nesting_event_id</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>nesting_event_type</span> 
 <span class=o>-</span> <span class=k>from</span> <span class=n>events_transactions_history</span> 
 <span class=o>-&gt;</span> <span class=k>where</span> <span class=n>thread_id</span> <span class=o>=</span> <span class=mi>48</span><span class=p>;</span>
<span class=o>+</span><span class=c1>-----------+----------+-----------+-----------------+-----------+------------------+--------------------+
</span><span class=c1></span><span class=o>|</span> <span class=n>thread_id</span> <span class=o>|</span> <span class=n>event_id</span> <span class=o>|</span> <span class=k>state</span>     <span class=o>|</span> <span class=k>source</span>          <span class=o>|</span> <span class=n>timer</span>     <span class=o>|</span> <span class=n>nesting_event_id</span> <span class=o>|</span> <span class=n>nesting_event_type</span> <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+----------+-----------+-----------------+-----------+------------------+--------------------+
</span><span class=c1></span><span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>      <span class=mi>179</span> <span class=o>|</span> <span class=k>COMMITTED</span> <span class=o>|</span> <span class=k>handler</span><span class=p>.</span><span class=n>cc</span><span class=p>:</span><span class=mi>1328</span> <span class=o>|</span> <span class=mi>496</span><span class=p>.</span><span class=mi>05</span> <span class=n>us</span> <span class=o>|</span>               <span class=mi>85</span> <span class=o>|</span> <span class=k>STATEMENT</span>          <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>      <span class=mi>401</span> <span class=o>|</span> <span class=k>COMMITTED</span> <span class=o>|</span> <span class=k>handler</span><span class=p>.</span><span class=n>cc</span><span class=p>:</span><span class=mi>1328</span> <span class=o>|</span> <span class=mi>559</span><span class=p>.</span><span class=mi>99</span> <span class=n>us</span> <span class=o>|</span>              <span class=mi>278</span> <span class=o>|</span> <span class=k>STATEMENT</span>          <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>5606</span> <span class=o>|</span> <span class=k>COMMITTED</span> <span class=o>|</span> <span class=k>handler</span><span class=p>.</span><span class=n>cc</span><span class=p>:</span><span class=mi>1328</span> <span class=o>|</span> <span class=mi>3</span><span class=p>.</span><span class=mi>03</span> <span class=n>ms</span>   <span class=o>|</span>             <span class=mi>5574</span> <span class=o>|</span> <span class=k>STATEMENT</span>          <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+----------+-----------+-----------------+-----------+------------------+--------------------+
</span><span class=c1></span><span class=mi>3</span> <span class=k>rows</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>
</code></pre></div><p>Why are there three statement events? We can check:</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>select</span> 
 <span class=o>-&gt;</span> <span class=n>thread_id</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>event_id</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>sql_text</span> 
 <span class=o>-&gt;</span> <span class=k>from</span> <span class=n>events_statements_history</span> 
 <span class=o>-&gt;</span> <span class=k>where</span> <span class=n>thread_id</span> <span class=o>=</span> <span class=mi>48</span> <span class=k>and</span> <span class=n>event_id</span> <span class=k>in</span> <span class=p>(</span><span class=mi>85</span><span class=p>,</span> <span class=mi>278</span><span class=p>,</span> <span class=mi>5574</span><span class=p>);</span>
<span class=o>+</span><span class=c1>-----------+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
</span><span class=c1></span><span class=o>|</span> <span class=n>thread_id</span> <span class=o>|</span> <span class=n>event_id</span> <span class=o>|</span> <span class=n>sql_text</span>                                                                                                                                                                                        <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
</span><span class=c1></span><span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>       <span class=mi>85</span> <span class=o>|</span> <span class=k>show</span> <span class=n>databases</span>                                                                                                                                                                                  <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>      <span class=mi>278</span> <span class=o>|</span> <span class=k>show</span> <span class=n>tables</span>                                                                                                                                                                                     <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>5574</span> <span class=o>|</span> <span class=k>select</span> <span class=n>co</span><span class=p>.</span><span class=n>continent</span><span class=p>,</span> <span class=n>co</span><span class=p>.</span><span class=n>name</span> <span class=k>as</span> <span class=n>country</span><span class=p>,</span> <span class=n>co</span><span class=p>.</span><span class=n>population</span> <span class=k>as</span> <span class=n>copop</span><span class=p>,</span> <span class=n>ci</span><span class=p>.</span><span class=n>name</span> <span class=k>as</span> <span class=n>capital</span><span class=p>,</span> <span class=n>ci</span><span class=p>.</span><span class=n>population</span> <span class=k>as</span> <span class=n>cipop</span> <span class=k>from</span> <span class=n>country</span> <span class=k>as</span> <span class=n>co</span> <span class=k>join</span> <span class=n>city</span> <span class=k>as</span> <span class=n>ci</span> <span class=k>on</span> <span class=n>co</span><span class=p>.</span><span class=n>capital</span> <span class=o>=</span> <span class=n>ci</span><span class=p>.</span><span class=n>id</span> <span class=k>where</span> <span class=n>continent</span> <span class=o>=</span> <span class=s1>&#39;Europe&#39;</span> <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
</span><span class=c1></span><span class=mi>3</span> <span class=k>rows</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>
</code></pre></div><p>The mysql command line client is running from the sandbox with <code>/home/kris/opt/mysql/8.0.25/bin/mysql --defaults-file=/home/kris/sandboxes/msb_8_0_25/my.sandbox.cnf world</code>.
Autocompletion for names is not disabled.
So on client startup, the client invisibly runs <code>show databases</code> to learn the names of all databases for autocompletion.
It then enters the <code>world</code> database as requested and runs <code>show tables</code> to learn the names of all tables in the <code>world</code> database.</p><p>Only then we come to the prompt and can paste our query.</p><p>We are only interested in <code>thread_id = 48 AND event_id = 5574</code>, our query.</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>select</span> <span class=o>*</span> 
 <span class=o>-&gt;</span> <span class=k>from</span> <span class=n>events_statements_history</span> 
 <span class=o>-&gt;</span> <span class=k>where</span> <span class=n>thread_id</span> <span class=o>=</span> <span class=mi>48</span> <span class=k>AND</span> <span class=n>event_id</span> <span class=o>=</span> <span class=mi>5574</span><span class=err>\</span><span class=k>G</span>
<span class=o>***************************</span> <span class=mi>1</span><span class=p>.</span> <span class=k>row</span> <span class=o>***************************</span>
              <span class=n>THREAD_ID</span><span class=p>:</span> <span class=mi>48</span>
               <span class=n>EVENT_ID</span><span class=p>:</span> <span class=mi>5574</span>
           <span class=n>END_EVENT_ID</span><span class=p>:</span> <span class=mi>6624</span>
             <span class=n>EVENT_NAME</span><span class=p>:</span> <span class=k>statement</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=k>select</span>
                 <span class=k>SOURCE</span><span class=p>:</span> <span class=n>init_net_server_extension</span><span class=p>.</span><span class=n>cc</span><span class=p>:</span><span class=mi>94</span>
            <span class=n>TIMER_START</span><span class=p>:</span> <span class=mi>61628458852000</span>
              <span class=n>TIMER_END</span><span class=p>:</span> <span class=mi>61631769329000</span>
             <span class=n>TIMER_WAIT</span><span class=p>:</span> <span class=mi>3310477000</span>
              <span class=n>LOCK_TIME</span><span class=p>:</span> <span class=mi>224000000</span>
               <span class=n>SQL_TEXT</span><span class=p>:</span> <span class=k>select</span> <span class=n>co</span><span class=p>.</span><span class=n>continent</span><span class=p>,</span> <span class=n>co</span><span class=p>.</span><span class=n>name</span> <span class=k>as</span> <span class=n>country</span><span class=p>,</span> <span class=n>co</span><span class=p>.</span><span class=n>population</span> <span class=k>as</span> <span class=n>copop</span><span class=p>,</span> <span class=n>ci</span><span class=p>.</span><span class=n>name</span> <span class=k>as</span> <span class=n>capital</span><span class=p>,</span> <span class=n>ci</span><span class=p>.</span><span class=n>population</span> <span class=k>as</span> <span class=n>cipop</span> <span class=k>from</span> <span class=n>country</span> <span class=k>as</span> <span class=n>co</span> <span class=k>join</span> <span class=n>city</span> <span class=k>as</span> <span class=n>ci</span> <span class=k>on</span> <span class=n>co</span><span class=p>.</span><span class=n>capital</span> <span class=o>=</span> <span class=n>ci</span><span class=p>.</span><span class=n>id</span> <span class=k>where</span> <span class=n>continent</span> <span class=o>=</span> <span class=s1>&#39;Europe&#39;</span>
                 <span class=n>DIGEST</span><span class=p>:</span> <span class=mi>409</span><span class=n>c336982f0d3d45c4b29da77fe83aed12c6043e8ce9771c11ec82ff347e647</span>
            <span class=n>DIGEST_TEXT</span><span class=p>:</span> <span class=k>SELECT</span> <span class=o>`</span><span class=n>co</span><span class=o>`</span> <span class=p>.</span> <span class=o>`</span><span class=n>continent</span><span class=o>`</span> <span class=p>,</span> <span class=o>`</span><span class=n>co</span><span class=o>`</span> <span class=p>.</span> <span class=o>`</span><span class=n>name</span><span class=o>`</span> <span class=k>AS</span> <span class=o>`</span><span class=n>country</span><span class=o>`</span> <span class=p>,</span> <span class=o>`</span><span class=n>co</span><span class=o>`</span> <span class=p>.</span> <span class=o>`</span><span class=n>population</span><span class=o>`</span> <span class=k>AS</span> <span class=o>`</span><span class=n>copop</span><span class=o>`</span> <span class=p>,</span> <span class=o>`</span><span class=n>ci</span><span class=o>`</span> <span class=p>.</span> <span class=o>`</span><span class=n>name</span><span class=o>`</span> <span class=k>AS</span> <span class=o>`</span><span class=n>capital</span><span class=o>`</span> <span class=p>,</span> <span class=o>`</span><span class=n>ci</span><span class=o>`</span> <span class=p>.</span> <span class=o>`</span><span class=n>population</span><span class=o>`</span> <span class=k>AS</span> <span class=o>`</span><span class=n>cipop</span><span class=o>`</span> <span class=k>FROM</span> <span class=o>`</span><span class=n>country</span><span class=o>`</span> <span class=k>AS</span> <span class=o>`</span><span class=n>co</span><span class=o>`</span> <span class=k>JOIN</span> <span class=o>`</span><span class=n>city</span><span class=o>`</span> <span class=k>AS</span> <span class=o>`</span><span class=n>ci</span><span class=o>`</span> <span class=k>ON</span> <span class=o>`</span><span class=n>co</span><span class=o>`</span> <span class=p>.</span> <span class=o>`</span><span class=n>capital</span><span class=o>`</span> <span class=o>=</span> <span class=o>`</span><span class=n>ci</span><span class=o>`</span> <span class=p>.</span> <span class=o>`</span><span class=n>id</span><span class=o>`</span> <span class=k>WHERE</span> <span class=o>`</span><span class=n>continent</span><span class=o>`</span> <span class=o>=</span> <span class=o>?</span>
         <span class=n>CURRENT_SCHEMA</span><span class=p>:</span> <span class=n>world</span>
            <span class=n>OBJECT_TYPE</span><span class=p>:</span> <span class=k>NULL</span>
          <span class=n>OBJECT_SCHEMA</span><span class=p>:</span> <span class=k>NULL</span>
            <span class=n>OBJECT_NAME</span><span class=p>:</span> <span class=k>NULL</span>
  <span class=n>OBJECT_INSTANCE_BEGIN</span><span class=p>:</span> <span class=k>NULL</span>
            <span class=n>MYSQL_ERRNO</span><span class=p>:</span> <span class=mi>0</span>
      <span class=k>RETURNED_SQLSTATE</span><span class=p>:</span> <span class=k>NULL</span>
           <span class=k>MESSAGE_TEXT</span><span class=p>:</span> <span class=k>NULL</span>
                 <span class=n>ERRORS</span><span class=p>:</span> <span class=mi>0</span>
               <span class=n>WARNINGS</span><span class=p>:</span> <span class=mi>0</span>
          <span class=n>ROWS_AFFECTED</span><span class=p>:</span> <span class=mi>0</span>
              <span class=n>ROWS_SENT</span><span class=p>:</span> <span class=mi>46</span>
          <span class=n>ROWS_EXAMINED</span><span class=p>:</span> <span class=mi>92</span>
<span class=n>CREATED_TMP_DISK_TABLES</span><span class=p>:</span> <span class=mi>0</span>
     <span class=n>CREATED_TMP_TABLES</span><span class=p>:</span> <span class=mi>0</span>
       <span class=n>SELECT_FULL_JOIN</span><span class=p>:</span> <span class=mi>0</span>
 <span class=n>SELECT_FULL_RANGE_JOIN</span><span class=p>:</span> <span class=mi>0</span>
           <span class=n>SELECT_RANGE</span><span class=p>:</span> <span class=mi>0</span>
     <span class=n>SELECT_RANGE_CHECK</span><span class=p>:</span> <span class=mi>0</span>
            <span class=n>SELECT_SCAN</span><span class=p>:</span> <span class=mi>0</span>
      <span class=n>SORT_MERGE_PASSES</span><span class=p>:</span> <span class=mi>0</span>
             <span class=n>SORT_RANGE</span><span class=p>:</span> <span class=mi>0</span>
              <span class=n>SORT_ROWS</span><span class=p>:</span> <span class=mi>0</span>
              <span class=n>SORT_SCAN</span><span class=p>:</span> <span class=mi>0</span>
          <span class=n>NO_INDEX_USED</span><span class=p>:</span> <span class=mi>0</span>
     <span class=n>NO_GOOD_INDEX_USED</span><span class=p>:</span> <span class=mi>0</span>
       <span class=n>NESTING_EVENT_ID</span><span class=p>:</span> <span class=k>NULL</span>
     <span class=n>NESTING_EVENT_TYPE</span><span class=p>:</span> <span class=k>NULL</span>
    <span class=n>NESTING_EVENT_LEVEL</span><span class=p>:</span> <span class=mi>0</span>
           <span class=n>STATEMENT_ID</span><span class=p>:</span> <span class=mi>125</span>
<span class=mi>1</span> <span class=k>row</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>
</code></pre></div><p>The statement is <code>statement/sql/select</code>.
It took 3310477000 picoseconds (3.31ms) to run.
The <code>sql_text</code> is the full text of the statement (up to a cutoff point, in order to manage memory consumption).
The parsed statement is called <code>digest_text</code> - identifiers are quoted, whitespace is normalized, actual constants are replaced with placeholders, and (not shown here) variable length <code>WHERE ... IN (...)</code> clauses are shortened with ellipses.
This normalized digest is then hashed and produces an identifier for this group of identically formed statements, the <code>digest</code>.
We learn about the number of rows looked at, <code>92</code> and sent, <code>46</code>.
No special flags indicating specific execution modes were set.</p><p>We can use the <code>event_id</code> to look even deeper:</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>select</span> 
 <span class=o>-&gt;</span> <span class=n>thread_id</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>event_id</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>event_name</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=k>source</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>sys</span><span class=p>.</span><span class=n>format_time</span><span class=p>(</span><span class=n>timer_wait</span><span class=p>)</span> <span class=k>as</span> <span class=n>timer</span> 
 <span class=o>-&gt;</span> <span class=k>from</span> <span class=n>events_stages_history</span> 
 <span class=o>-&gt;</span> <span class=k>where</span> <span class=n>thread_id</span> <span class=o>=</span> <span class=mi>48</span> 
 <span class=o>-&gt;</span>   <span class=k>and</span> <span class=n>nesting_event_id</span> <span class=o>=</span> <span class=mi>5574</span> 
 <span class=o>-&gt;</span> <span class=k>order</span> <span class=k>by</span> <span class=n>event_id</span><span class=p>;</span>
<span class=o>+</span><span class=c1>-----------+----------+--------------------------------------+----------------------+-----------+
</span><span class=c1></span><span class=o>|</span> <span class=n>thread_id</span> <span class=o>|</span> <span class=n>event_id</span> <span class=o>|</span> <span class=n>event_name</span>                           <span class=o>|</span> <span class=k>source</span>               <span class=o>|</span> <span class=n>timer</span>     <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+----------+--------------------------------------+----------------------+-----------+
</span><span class=c1></span><span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>5610</span> <span class=o>|</span> <span class=n>stage</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>optimizing</span>                 <span class=o>|</span> <span class=n>sql_optimizer</span><span class=p>.</span><span class=n>cc</span><span class=p>:</span><span class=mi>270</span> <span class=o>|</span> <span class=mi>15</span><span class=p>.</span><span class=mi>88</span> <span class=n>us</span>  <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>5611</span> <span class=o>|</span> <span class=n>stage</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=k>statistics</span>                 <span class=o>|</span> <span class=n>sql_optimizer</span><span class=p>.</span><span class=n>cc</span><span class=p>:</span><span class=mi>534</span> <span class=o>|</span> <span class=mi>703</span><span class=p>.</span><span class=mi>58</span> <span class=n>us</span> <span class=o>|</span> <span class=o>&lt;-</span> <span class=o>!!</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>5710</span> <span class=o>|</span> <span class=n>stage</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>preparing</span>                  <span class=o>|</span> <span class=n>sql_optimizer</span><span class=p>.</span><span class=n>cc</span><span class=p>:</span><span class=mi>618</span> <span class=o>|</span> <span class=mi>31</span><span class=p>.</span><span class=mi>93</span> <span class=n>us</span>  <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>5712</span> <span class=o>|</span> <span class=n>stage</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>executing</span>                  <span class=o>|</span> <span class=n>sql_union</span><span class=p>.</span><span class=n>cc</span><span class=p>:</span><span class=mi>1126</span>    <span class=o>|</span> <span class=mi>2</span><span class=p>.</span><span class=mi>26</span> <span class=n>ms</span>   <span class=o>|</span> <span class=o>&lt;-</span> <span class=o>!!</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6593</span> <span class=o>|</span> <span class=n>stage</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=k>end</span>                        <span class=o>|</span> <span class=n>sql_select</span><span class=p>.</span><span class=n>cc</span><span class=p>:</span><span class=mi>586</span>    <span class=o>|</span> <span class=mi>1</span><span class=p>.</span><span class=mi>86</span> <span class=n>us</span>   <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6594</span> <span class=o>|</span> <span class=n>stage</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>query</span> <span class=k>end</span>                  <span class=o>|</span> <span class=n>sql_parse</span><span class=p>.</span><span class=n>cc</span><span class=p>:</span><span class=mi>4542</span>    <span class=o>|</span> <span class=mi>1</span><span class=p>.</span><span class=mi>93</span> <span class=n>us</span>   <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6596</span> <span class=o>|</span> <span class=n>stage</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>waiting</span> <span class=k>for</span> <span class=k>handler</span> <span class=k>commit</span> <span class=o>|</span> <span class=k>handler</span><span class=p>.</span><span class=n>cc</span><span class=p>:</span><span class=mi>1594</span>      <span class=o>|</span> <span class=mi>9</span><span class=p>.</span><span class=mi>05</span> <span class=n>us</span>   <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6600</span> <span class=o>|</span> <span class=n>stage</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>closing</span> <span class=n>tables</span>             <span class=o>|</span> <span class=n>sql_parse</span><span class=p>.</span><span class=n>cc</span><span class=p>:</span><span class=mi>4593</span>    <span class=o>|</span> <span class=mi>14</span><span class=p>.</span><span class=mi>02</span> <span class=n>us</span>  <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6621</span> <span class=o>|</span> <span class=n>stage</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>freeing</span> <span class=n>items</span>              <span class=o>|</span> <span class=n>sql_parse</span><span class=p>.</span><span class=n>cc</span><span class=p>:</span><span class=mi>5042</span>    <span class=o>|</span> <span class=mi>29</span><span class=p>.</span><span class=mi>4</span> <span class=n>us</span>   <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6623</span> <span class=o>|</span> <span class=n>stage</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>cleaning</span> <span class=n>up</span>                <span class=o>|</span> <span class=n>sql_parse</span><span class=p>.</span><span class=n>cc</span><span class=p>:</span><span class=mi>2252</span>    <span class=o>|</span> <span class=mi>1</span><span class=p>.</span><span class=mi>17</span> <span class=n>us</span>   <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+----------+--------------------------------------+----------------------+-----------+
</span><span class=c1></span><span class=mi>10</span> <span class=k>rows</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>
</code></pre></div><p>These are the various execution stages of our statement - we select by <code>thread_id</code> and with the <code>event_id</code> of the statement, <code>5574</code> as a <code>nesting_id</code>, ordered by <code>event_id</code>.
Time was consumed by the <code>stage/sql/statistics</code> phase, looking up table stats for a good execution plan, and then by the actual query execution in <code>stage/sql/executing</code>.
The former took 0.7ms (703.58us), the latter 2.26ms.</p><p>We are interested in what took so long, specifically, so we look into waits for event_ids 5611 and 5712 - finding nothing, and also nothing particularly time-consuming:</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>select</span>
 <span class=o>-&gt;</span> <span class=n>thread_id</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>event_id</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>event_name</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>sys</span><span class=p>.</span><span class=n>format_time</span><span class=p>(</span><span class=n>timer_wait</span><span class=p>)</span> <span class=k>as</span> <span class=n>timer</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>nesting_event_type</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>nesting_event_id</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=k>operation</span> 
 <span class=o>-&gt;</span> <span class=k>from</span> <span class=n>events_waits_history</span> 
 <span class=o>-&gt;</span> <span class=k>where</span> <span class=n>thread_id</span> <span class=o>=</span> <span class=mi>48</span>
  <span class=o>-&gt;</span> <span class=k>order</span> <span class=k>by</span> <span class=n>event_id</span><span class=p>;</span>
<span class=o>+</span><span class=c1>-----------+----------+------------------------------------------+-----------+--------------------+------------------+-----------+
</span><span class=c1></span><span class=o>|</span> <span class=n>thread_id</span> <span class=o>|</span> <span class=n>event_id</span> <span class=o>|</span> <span class=n>event_name</span>                               <span class=o>|</span> <span class=n>timer</span>     <span class=o>|</span> <span class=n>nesting_event_type</span> <span class=o>|</span> <span class=n>nesting_event_id</span> <span class=o>|</span> <span class=k>operation</span> <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+----------+------------------------------------------+-----------+--------------------+------------------+-----------+
</span><span class=c1></span><span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6614</span> <span class=o>|</span> <span class=n>wait</span><span class=o>/</span><span class=n>synch</span><span class=o>/</span><span class=n>mutex</span><span class=o>/</span><span class=n>innodb</span><span class=o>/</span><span class=n>trx_mutex</span>        <span class=o>|</span> <span class=mi>56</span><span class=p>.</span><span class=mi>26</span> <span class=n>ns</span>  <span class=o>|</span> <span class=n>STAGE</span>              <span class=o>|</span>             <span class=mi>6600</span> <span class=o>|</span> <span class=k>lock</span>      <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6615</span> <span class=o>|</span> <span class=n>wait</span><span class=o>/</span><span class=n>synch</span><span class=o>/</span><span class=n>mutex</span><span class=o>/</span><span class=n>innodb</span><span class=o>/</span><span class=n>trx_mutex</span>        <span class=o>|</span> <span class=mi>48</span><span class=p>.</span><span class=mi>64</span> <span class=n>ns</span>  <span class=o>|</span> <span class=n>STAGE</span>              <span class=o>|</span>             <span class=mi>6600</span> <span class=o>|</span> <span class=k>lock</span>      <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6616</span> <span class=o>|</span> <span class=n>wait</span><span class=o>/</span><span class=n>synch</span><span class=o>/</span><span class=n>mutex</span><span class=o>/</span><span class=n>innodb</span><span class=o>/</span><span class=n>trx_mutex</span>        <span class=o>|</span> <span class=mi>50</span><span class=p>.</span><span class=mi>4</span> <span class=n>ns</span>   <span class=o>|</span> <span class=n>STAGE</span>              <span class=o>|</span>             <span class=mi>6600</span> <span class=o>|</span> <span class=k>lock</span>      <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6617</span> <span class=o>|</span> <span class=n>wait</span><span class=o>/</span><span class=n>synch</span><span class=o>/</span><span class=n>mutex</span><span class=o>/</span><span class=n>innodb</span><span class=o>/</span><span class=n>trx_mutex</span>        <span class=o>|</span> <span class=mi>46</span><span class=p>.</span><span class=mi>88</span> <span class=n>ns</span>  <span class=o>|</span> <span class=n>STAGE</span>              <span class=o>|</span>             <span class=mi>6600</span> <span class=o>|</span> <span class=k>lock</span>      <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6618</span> <span class=o>|</span> <span class=n>wait</span><span class=o>/</span><span class=n>synch</span><span class=o>/</span><span class=n>mutex</span><span class=o>/</span><span class=n>innodb</span><span class=o>/</span><span class=n>trx_mutex</span>        <span class=o>|</span> <span class=mi>43</span><span class=p>.</span><span class=mi>36</span> <span class=n>ns</span>  <span class=o>|</span> <span class=n>STAGE</span>              <span class=o>|</span>             <span class=mi>6600</span> <span class=o>|</span> <span class=k>lock</span>      <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6619</span> <span class=o>|</span> <span class=n>wait</span><span class=o>/</span><span class=n>synch</span><span class=o>/</span><span class=n>mutex</span><span class=o>/</span><span class=n>innodb</span><span class=o>/</span><span class=n>trx_mutex</span>        <span class=o>|</span> <span class=mi>45</span><span class=p>.</span><span class=mi>12</span> <span class=n>ns</span>  <span class=o>|</span> <span class=n>STAGE</span>              <span class=o>|</span>             <span class=mi>6600</span> <span class=o>|</span> <span class=k>lock</span>      <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6620</span> <span class=o>|</span> <span class=n>wait</span><span class=o>/</span><span class=n>synch</span><span class=o>/</span><span class=n>mutex</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>LOCK_table_cache</span>    <span class=o>|</span> <span class=mi>66</span><span class=p>.</span><span class=mi>8</span> <span class=n>ns</span>   <span class=o>|</span> <span class=n>STAGE</span>              <span class=o>|</span>             <span class=mi>6600</span> <span class=o>|</span> <span class=k>lock</span>      <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6622</span> <span class=o>|</span> <span class=n>wait</span><span class=o>/</span><span class=n>io</span><span class=o>/</span><span class=n>socket</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>client_connection</span>     <span class=o>|</span> <span class=mi>18</span><span class=p>.</span><span class=mi>91</span> <span class=n>us</span>  <span class=o>|</span> <span class=n>STAGE</span>              <span class=o>|</span>             <span class=mi>6621</span> <span class=o>|</span> <span class=n>send</span>      <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6624</span> <span class=o>|</span> <span class=n>wait</span><span class=o>/</span><span class=n>synch</span><span class=o>/</span><span class=n>mutex</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>THD</span><span class=p>::</span><span class=n>LOCK_thd_query</span> <span class=o>|</span> <span class=mi>124</span><span class=p>.</span><span class=mi>23</span> <span class=n>ns</span> <span class=o>|</span> <span class=n>STAGE</span>              <span class=o>|</span>             <span class=mi>6623</span> <span class=o>|</span> <span class=k>lock</span>      <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span>     <span class=mi>6626</span> <span class=o>|</span> <span class=n>wait</span><span class=o>/</span><span class=n>io</span><span class=o>/</span><span class=n>socket</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>client_connection</span>     <span class=o>|</span> <span class=k>NULL</span>      <span class=o>|</span> <span class=n>WAIT</span>               <span class=o>|</span>             <span class=mi>6625</span> <span class=o>|</span> <span class=n>recv</span>      <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+----------+------------------------------------------+-----------+--------------------+------------------+-----------+
</span><span class=c1></span><span class=mi>10</span> <span class=k>rows</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>
</code></pre></div><p>We can see I/O in a global summary, and the timings make sense in the context of the experiment:</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>select</span>
 <span class=o>-&gt;</span> <span class=n>object_type</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>object_schema</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>object_name</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>count_star</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>sys</span><span class=p>.</span><span class=n>format_time</span><span class=p>(</span><span class=n>max_timer_read</span><span class=p>)</span> <span class=k>as</span> <span class=o>`</span><span class=k>read</span><span class=o>`</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>sys</span><span class=p>.</span><span class=n>format_time</span><span class=p>(</span><span class=n>max_timer_write</span><span class=p>)</span> <span class=k>as</span> <span class=o>`</span><span class=k>write</span><span class=o>`</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>sys</span><span class=p>.</span><span class=n>format_time</span><span class=p>(</span><span class=n>max_timer_fetch</span><span class=p>)</span> <span class=k>as</span> <span class=o>`</span><span class=k>fetch</span><span class=o>`</span>
  <span class=o>-&gt;</span> <span class=k>from</span> <span class=n>table_io_waits_summary_by_table</span> 
  <span class=o>-&gt;</span> <span class=k>where</span> <span class=n>object_schema</span> <span class=o>=</span> <span class=s1>&#39;world&#39;</span><span class=err>\</span><span class=k>G</span>
<span class=o>***************************</span> <span class=mi>1</span><span class=p>.</span> <span class=k>row</span> <span class=o>***************************</span>
  <span class=n>object_type</span><span class=p>:</span> <span class=k>TABLE</span>
<span class=n>object_schema</span><span class=p>:</span> <span class=n>world</span>
  <span class=n>object_name</span><span class=p>:</span> <span class=n>city</span>
   <span class=n>count_star</span><span class=p>:</span> <span class=mi>46</span>
         <span class=k>read</span><span class=p>:</span> <span class=mi>569</span><span class=p>.</span><span class=mi>17</span> <span class=n>us</span>
        <span class=k>write</span><span class=p>:</span> <span class=mi>0</span> <span class=n>ps</span>
        <span class=k>fetch</span><span class=p>:</span> <span class=mi>569</span><span class=p>.</span><span class=mi>17</span> <span class=n>us</span>
<span class=o>***************************</span> <span class=mi>2</span><span class=p>.</span> <span class=k>row</span> <span class=o>***************************</span>
  <span class=n>object_type</span><span class=p>:</span> <span class=k>TABLE</span>
<span class=n>object_schema</span><span class=p>:</span> <span class=n>world</span>
  <span class=n>object_name</span><span class=p>:</span> <span class=n>country</span>
   <span class=n>count_star</span><span class=p>:</span> <span class=mi>47</span>
         <span class=k>read</span><span class=p>:</span> <span class=mi>703</span><span class=p>.</span><span class=mi>4</span> <span class=n>us</span>
        <span class=k>write</span><span class=p>:</span> <span class=mi>0</span> <span class=n>ps</span>
        <span class=k>fetch</span><span class=p>:</span> <span class=mi>703</span><span class=p>.</span><span class=mi>4</span> <span class=n>us</span>
<span class=p>...</span>
</code></pre></div><p>But why are the I/O times not visible to us?
That&rsquo;s a bit unclear.
My theory was that the reads happen asynchronously by some background thread.
But a quick query shows no time spend on reader threads.</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>select</span> 
 <span class=o>-&gt;</span> <span class=n>t</span><span class=p>.</span><span class=n>thread_id</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>t</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>t</span><span class=p>.</span><span class=k>type</span> 
 <span class=o>-&gt;</span> <span class=k>from</span> <span class=n>threads</span> <span class=k>as</span> <span class=n>t</span> <span class=k>join</span> <span class=n>events_waits_summary_by_thread_by_event_name</span> <span class=k>as</span> <span class=n>e</span> 
 <span class=o>-&gt;</span>    <span class=k>on</span> <span class=n>t</span><span class=p>.</span><span class=n>thread_id</span> <span class=o>=</span> <span class=n>e</span><span class=p>.</span><span class=n>thread_id</span>  
 <span class=o>-&gt;</span> <span class=k>where</span> <span class=n>e</span><span class=p>.</span><span class=n>max_timer_wait</span> <span class=o>&gt;</span> <span class=mi>0</span> 
 <span class=o>-&gt;</span>    <span class=k>and</span> <span class=n>e</span><span class=p>.</span><span class=n>event_name</span> <span class=o>=</span> <span class=s1>&#39;wait/io/file/innodb/innodb_data_file&#39;</span><span class=p>;</span>
<span class=o>+</span><span class=c1>-----------+---------------------------------------------+------------+
</span><span class=c1></span><span class=o>|</span> <span class=n>thread_id</span> <span class=o>|</span> <span class=n>name</span>                                        <span class=o>|</span> <span class=k>type</span>       <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+---------------------------------------------+------------+
</span><span class=c1></span><span class=o>|</span>         <span class=mi>1</span> <span class=o>|</span> <span class=n>thread</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>main</span>                             <span class=o>|</span> <span class=n>BACKGROUND</span> <span class=o>|</span>
<span class=o>|</span>         <span class=mi>9</span> <span class=o>|</span> <span class=n>thread</span><span class=o>/</span><span class=n>innodb</span><span class=o>/</span><span class=n>io_write_thread</span>               <span class=o>|</span> <span class=n>BACKGROUND</span> <span class=o>|</span>
<span class=o>|</span>        <span class=mi>10</span> <span class=o>|</span> <span class=n>thread</span><span class=o>/</span><span class=n>innodb</span><span class=o>/</span><span class=n>io_write_thread</span>               <span class=o>|</span> <span class=n>BACKGROUND</span> <span class=o>|</span>
<span class=o>|</span>        <span class=mi>11</span> <span class=o>|</span> <span class=n>thread</span><span class=o>/</span><span class=n>innodb</span><span class=o>/</span><span class=n>io_write_thread</span>               <span class=o>|</span> <span class=n>BACKGROUND</span> <span class=o>|</span>
<span class=o>|</span>        <span class=mi>12</span> <span class=o>|</span> <span class=n>thread</span><span class=o>/</span><span class=n>innodb</span><span class=o>/</span><span class=n>io_write_thread</span>               <span class=o>|</span> <span class=n>BACKGROUND</span> <span class=o>|</span>
<span class=o>|</span>        <span class=mi>13</span> <span class=o>|</span> <span class=n>thread</span><span class=o>/</span><span class=n>innodb</span><span class=o>/</span><span class=n>page_flush_coordinator_thread</span> <span class=o>|</span> <span class=n>BACKGROUND</span> <span class=o>|</span>
<span class=o>|</span>        <span class=mi>33</span> <span class=o>|</span> <span class=n>thread</span><span class=o>/</span><span class=n>innodb</span><span class=o>/</span><span class=n>clone_gtid_thread</span>             <span class=o>|</span> <span class=n>BACKGROUND</span> <span class=o>|</span>
<span class=o>|</span>        <span class=mi>47</span> <span class=o>|</span> <span class=n>thread</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>one_connection</span>                   <span class=o>|</span> <span class=n>FOREGROUND</span> <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span> <span class=n>thread</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>one_connection</span>                   <span class=o>|</span> <span class=n>FOREGROUND</span> <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+---------------------------------------------+------------+
</span><span class=c1></span><span class=mi>9</span> <span class=k>rows</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>
</code></pre></div><p>We seem to be unable to attribute time spent loading data from disk to a specific thread, and we seem to be unable to account for the runtime of certain stages by looking at waits.
That&rsquo;s unexpected.</p><h1 id=memory-only-as-summary>Memory only as summary</h1><p>Diverse <code>memory_%</code> tables exist to track memory usage in the server.
All of these tables are summary tables, there are no memory events tables that could trace memory usage per query.
That might be okay.</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>show</span> <span class=n>tables</span> <span class=k>like</span> <span class=s1>&#39;%memory%&#39;</span><span class=p>;</span>
<span class=o>+</span><span class=c1>-----------------------------------------+
</span><span class=c1></span><span class=o>|</span> <span class=n>Tables_in_performance_schema</span> <span class=p>(</span><span class=o>%</span><span class=n>memory</span><span class=o>%</span><span class=p>)</span> <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------------------------------------+
</span><span class=c1></span><span class=o>|</span> <span class=n>memory_summary_by_account_by_event_name</span> <span class=o>|</span>
<span class=o>|</span> <span class=n>memory_summary_by_host_by_event_name</span>    <span class=o>|</span>
<span class=o>|</span> <span class=n>memory_summary_by_thread_by_event_name</span>  <span class=o>|</span>
<span class=o>|</span> <span class=n>memory_summary_by_user_by_event_name</span>    <span class=o>|</span>
<span class=o>|</span> <span class=n>memory_summary_global_by_event_name</span>     <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------------------------------------+
</span><span class=c1></span><span class=mi>5</span> <span class=k>rows</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>
</code></pre></div><p>We can do interesting things with stuff such as <code>memory_summary_by_thread_by_event_name</code>, at least on our mostly idle server.</p><div class=highlight><pre class=chroma><code class=language-sql data-lang=sql><span class=n>mysql</span> <span class=p>[</span><span class=n>localhost</span><span class=p>:</span><span class=mi>8025</span><span class=p>]</span> <span class=err>{</span><span class=n>msandbox</span><span class=err>}</span> <span class=p>(</span><span class=n>performance_schema</span><span class=p>)</span> <span class=o>&gt;</span> <span class=k>select</span> 
 <span class=o>-&gt;</span> <span class=n>thread_id</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>event_name</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>count_alloc</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>sum_number_of_bytes_alloc</span><span class=p>,</span> 
 <span class=o>-&gt;</span> <span class=n>high_number_of_bytes_used</span> 
 <span class=o>-&gt;</span> <span class=k>from</span> <span class=n>memory_summary_by_thread_by_event_name</span> 
 <span class=o>-&gt;</span> <span class=k>where</span> <span class=n>thread_id</span> <span class=o>=</span> <span class=mi>48</span> 
 <span class=o>-&gt;</span>   <span class=k>and</span> <span class=n>HIGH_NUMBER_OF_BYTES_USED</span> <span class=o>&gt;</span> <span class=mi>0</span> 
 <span class=o>-&gt;</span> <span class=k>order</span> <span class=k>by</span> <span class=n>HIGH_NUMBER_OF_BYTES_USED</span> <span class=k>desc</span> <span class=k>limit</span> <span class=mi>5</span><span class=p>;</span>
<span class=o>+</span><span class=c1>-----------+-------------------------------+-------------+---------------------------+---------------------------+
</span><span class=c1></span><span class=o>|</span> <span class=n>thread_id</span> <span class=o>|</span> <span class=n>event_name</span>                    <span class=o>|</span> <span class=n>count_alloc</span> <span class=o>|</span> <span class=n>sum_number_of_bytes_alloc</span> <span class=o>|</span> <span class=n>high_number_of_bytes_used</span> <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+-------------------------------+-------------+---------------------------+---------------------------+
</span><span class=c1></span><span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span> <span class=n>memory</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>THD</span><span class=p>::</span><span class=n>main_mem_root</span> <span class=o>|</span>          <span class=mi>22</span> <span class=o>|</span>                   <span class=mi>1181008</span> <span class=o>|</span>                    <span class=mi>613544</span> <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span> <span class=n>memory</span><span class=o>/</span><span class=n>innodb</span><span class=o>/</span><span class=n>memory</span>          <span class=o>|</span>         <span class=mi>226</span> <span class=o>|</span>                   <span class=mi>1059368</span> <span class=o>|</span>                    <span class=mi>250032</span> <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span> <span class=n>memory</span><span class=o>/</span><span class=k>sql</span><span class=o>/</span><span class=n>dd</span><span class=p>::</span><span class=n>objects</span>        <span class=o>|</span>         <span class=mi>205</span> <span class=o>|</span>                     <span class=mi>47432</span> <span class=o>|</span>                     <span class=mi>44648</span> <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span> <span class=n>memory</span><span class=o>/</span><span class=n>innodb</span><span class=o>/</span><span class=n>ha_innodb</span>       <span class=o>|</span>          <span class=mi>26</span> <span class=o>|</span>                     <span class=mi>35784</span> <span class=o>|</span>                     <span class=mi>35784</span> <span class=o>|</span>
<span class=o>|</span>        <span class=mi>48</span> <span class=o>|</span> <span class=n>memory</span><span class=o>/</span><span class=n>innodb</span><span class=o>/</span><span class=n>fil0fil</span>         <span class=o>|</span>           <span class=mi>2</span> <span class=o>|</span>                     <span class=mi>65600</span> <span class=o>|</span>                     <span class=mi>32800</span> <span class=o>|</span>
<span class=o>+</span><span class=c1>-----------+-------------------------------+-------------+---------------------------+---------------------------+
</span><span class=c1></span><span class=mi>5</span> <span class=k>rows</span> <span class=k>in</span> <span class=k>set</span> <span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span> <span class=n>sec</span><span class=p>)</span>
</code></pre></div><h1 id=no-explain>No EXPLAIN</h1><p>Another thing that would be useful to collect from P_S is the actual execution plan of a query.
But while we can explain a lot of statements by running <code>EXPLAIN &lt;stmt></code>, and while we can <code>EXPLAIN FOR CONNECT ...</code>, the former is not the recorded execution plan, and the latter only works while the query is running.
It&rsquo;s the actual execution plan while the query executes, but it is not recorded.</p><h1 id=summary>Summary</h1><p>A lot of information about query execution can be gathered from P_S.
The query execution can be broken down in statements, stages and waits.
Specifically, statements collect a lot of interesting quality flags.
Stages can collect percentages of completion for long-running queries and give a general feel about where in the query execution time is spent.
Waits should be able to attribute time to individual operations in the database server, but specifically for file I/O this seems to be more complicated, and I have not been able to solve it.</p><p>We can see waits for I/O summary tables, and we can see a lot of other statistical information in other summary tables.
We can also use additional tables not covered here for debugging (for example <code>DATA_LOCKS</code> for locking behavior).</p><p>Memory instrumentation is interesting, but at this stage it is unclear to me if it is sufficient.</p><p>It seems to be really hard to record execution plans together with statements.</p><p>More experimentation with more complicated queries is necessary to see if it is possible to see things like sorting, temp files and similar operations, and attribute time to these operations.</p><p>The number of queries on P_S necessary to extract information about a single query is staggering, a 10:1 ratio.
At least filters exist and are on by default, so that I do not have to hear my monitoring noise in my monitoring.
That is good.</p><p>I could really use a single large JSON blob containing the entire package with performance data for a query, at once - one query to trace one query.
That is, the information from transaction, statement, stages, waits, the execution plan and the memory consumption for a given transaction or statement, in one go.</p><p><em>First published on <a href=https://blog.koehntopp.info/2021/09/15/mysql-tracing-a-single-query-with-performanceschema.html target=_blank rel="noopener noreferrer">https://blog.koehntopp.info/</a> and syndicated here with permission of the <a href=/authors/koehntopp/>author</a>.</em> <span aria-label="End of article." role=text class=tombstone>âˆŽ</span></p></div><div class=bios><div class=bios__bio><img class=avatar src=https://percona.community/blog/2020/10/0-1_hu3deba67f956729c41648f59c305f5449_20674_240x240_fill_q90_lanczos_smart1.jpeg alt><div class=bios__content><h2><span>Kristian KÃ¶hntopp</span></h2><p>Senior Scalability Engineer at Booking.com.</p><p><a href=/authors/koehntopp>See all posts by Kristian KÃ¶hntopp &#187;</a></p></div></div></div></article><h2>Comments</h2><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://percona.community/blog/2022/10/18/mysql-tracing-a-single-query-with-performance_schema/"};(function(){var a=document,b=a.createElement('script');b.src='https://percona-community01.disqus.com/embed.js',b.setAttribute('data-timestamp',+new Date),(a.head||a.body).appendChild(b)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><div class=sharing><a class=resp-sharing-button__link href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fpercona.community%2fblog%2f2022%2f10%2f18%2fmysql-tracing-a-single-query-with-performance_schema%2f" target=_blank rel=noopener aria-label="Share on Facebook"><div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--large"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></div><span>Share on Facebook</span></div></a><a class=resp-sharing-button__link href="https://twitter.com/intent/tweet/?text=MySQL%3a%20Tracing%20a%20single%20query%20with%20PERFORMANCE_SCHEMA&url=https%3a%2f%2fpercona.community%2fblog%2f2022%2f10%2f18%2fmysql-tracing-a-single-query-with-performance_schema%2f" target=_blank rel=noopener aria-label="Share on Twitter"><div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--large"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5.0-4.55 2.04-4.55 4.54.0.36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3.0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35.0 12.92-6.92 12.92-12.93.0-.2.0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg></div><span>Share on Twitter</span></div></a><a class=resp-sharing-button__link href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fpercona.community%2fblog%2f2022%2f10%2f18%2fmysql-tracing-a-single-query-with-performance_schema%2f&title=MySQL%3a%20Tracing%20a%20single%20query%20with%20PERFORMANCE_SCHEMA&source=https%3a%2f%2fpercona.community%2fblog%2f2022%2f10%2f18%2fmysql-tracing-a-single-query-with-performance_schema%2f" target=_blank rel=noopener aria-label="Share on LinkedIn"><div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--large"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6.0 2.5 1 2.6 2.5.0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg></div><span>Share on LinkedIn</span></div></a><a class=resp-sharing-button__link href="https://telegram.me/share/url?text=MySQL%3a%20Tracing%20a%20single%20query%20with%20PERFORMANCE_SCHEMA&url=https%3a%2f%2fpercona.community%2fblog%2f2022%2f10%2f18%2fmysql-tracing-a-single-query-with-performance_schema%2f" target=_blank rel=noopener aria-label="Share on Telegram"><div class="resp-sharing-button resp-sharing-button--telegram resp-sharing-button--large"><div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M.707 8.475C.275 8.64.0 9.508.0 9.508s.284.867.718 1.03l5.09 1.897 1.986 6.38a1.102 1.102.0 001.75.527l2.96-2.41a.405.405.0 01.494-.013l5.34 3.87a1.1 1.1.0 001.046.135 1.1 1.1.0 00.682-.803l3.91-18.795A1.102 1.102.0 0022.5.075L.706 8.475z"/></svg></div><span>Share on Telegram</span></div></a></div><div class=recommendations><h2>Did you like this post? Why not read more?</h2><div class="grid grid--3"><div class=grid__item><a href=/blog/2020/12/10/embracing-the-stream/ class="post post--preview"><img src=/blog/2020/12/stream-migrate-now_hu710e74e15914f71a0f70d9c6d8a01579_48687_682x384_fill_q90_bgffffff_lanczos_smart1_2.jpg alt><h3>Embracing the Stream</h3><div class=post__content><p>So this happened: CentOS Project shifts focus to CentOS Stream</p><p class=readmore>Read more &#187;</p></div></a></div><div class=grid__item><a href=/blog/2020/12/01/not-joining-on-performance_schema/ class="post post--preview"><img src=/blog/2020/12/Screenshot-2020-12-01-at-23.21.51_hubf4bc2d3158d798d77f02ba9aa5fe5a4_496835_682x384_fill_q90_bgffffff_lanczos_smart1_2.jpg alt><h3>Not JOINing on PERFORMANCE_SCHEMA</h3><div class=post__content><p>The tables in PERFORMANCE_SCHEMA (P_S) are not actually tables. You should not think of them as tables, even if your SQL works on them. You should not JOIN them, and you should not GROUP or ORDER BY them.</p><p class=readmore>Read more &#187;</p></div></a></div><div class=grid__item><a href=/blog/2020/11/23/on-the-observability-of-outliers/ class="post post--preview"><img src=/blog/2020/11/obs-no_huf9c5780925c4a11bfce2a3865cd0b216_569743_682x384_fill_q90_bgffffff_lanczos_smart1_2.jpg alt><h3>On the Observability of Outliers</h3><div class=post__content><p>At work, I am in an ongoing discussion with a number of people on the Observability of Outliers. It started with the age-old question â€œHow do I find slow queries in my application?â€ aka â€œWhat would I want from tooling to get that data and where should that tooling sit?â€</p><p class=readmore>Read more &#187;</p></div></a></div></div></div></div></main><div class=edit-on-github><div class=container><a href=https://github.com/percona/community/edit/main/content/blog/2022-10-18-mysql-tracing-a-single-query-with-performance-schema.md target=_blank rel="noreferrer noopener">âœŽ Edit this page on GitHub</a></div></div><footer class=page><p class=aria-only id=footer-heading aria-hidden=false>Footer</p><div class=page-footer><nav class=footer><div class=abc><ul><li><a href=https://www.percona.com/about-percona target=_blank rel="noopener noreferrer"><span>About</span></a></li><li><a href=https://www.percona.com/legal target=_blank rel="noopener noreferrer"><span>Legal</span></a></li><li><a href=https://www.percona.com/about-percona/contact target=_blank rel="noopener noreferrer"><span>Contact</span></a></li><li><a href=https://forums.percona.com target=_blank rel="noopener noreferrer"><span>Forums</span></a></li><li><a href=http://per.co.na/discord target=_blank rel="noopener noreferrer"><span>Discord</span></a></li><li><a href=/map><span>Sitemap</span></a></li><li><a class=cmp-revoke-consent>Revoke Consent</a></li></ul></div></nav></div><div><aside>Â© Percona Community. MySQL, InnoDB, MariaDB and MongoDB are trademarks of their respective owners.</aside></div></footer><script type=text/javascript src=https://percona.community/js/aria.5f30892348d4662fe548bb410f15fc6fe2e1cbfd6473beb3c3ed1d6b362568bbea48896a9f2302a4f78f4614904ca3ef43155ae26f063ed84ae957f951e19647.js integrity="sha512-XzCJI0jUZi/lSLtBDxX8b+Lhy/1kc76zw+0dazYlaLvqSIlqnyMCpPePRhSQTKPvQxVa4m8GPthK6Vf5UeGWRw==" defer></script></body></html>